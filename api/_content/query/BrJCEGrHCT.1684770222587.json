{"_path":"/os/optimise/kernelcfg","_dir":"optimise","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Kernel Config","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"kernel-config"},"children":[{"type":"text","value":"Kernel Config"}]},{"type":"element","tag":"h2","props":{"id":"realtime-pre-emption-model"},"children":[{"type":"text","value":"Realtime Pre-emption model"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This is the main switch to enable a realtime kernel when using the realtime patches"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"CONFIG_PREEMPT_RT"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nGeneral -> Preemption Model -> Select full real time"}]}]},{"type":"element","tag":"h2","props":{"id":"debian-realtime"},"children":[{"type":"text","value":"Debian Realtime"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Looking at the Debian realtime options the below appears to be set for the realtime kernel"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://salsa.debian.org/kernel-team/linux/-/blob/master/debian/config/arm64/rt/config","rel":["nofollow"]},"children":[{"type":"text","value":"https://salsa.debian.org/kernel-team/linux/-/blob/master/debian/config/arm64/rt/config"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://salsa.debian.org/kernel-team/linux/-/blob/master/debian/config/featureset-rt/config","rel":["nofollow"]},"children":[{"type":"text","value":"https://salsa.debian.org/kernel-team/linux/-/blob/master/debian/config/featureset-rt/config"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"KVM appears to be disabled, it doesn't seem to make a difference for the newer kernels."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nI think originally it was required for realtime to work on some platforms."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nBy having it disabled I think HAVE_POSIX_CPU_TIMERS_TASK_WORK is then enabled which then allows for ARCH_SUPPORTS_RT on some platforms, although I don't think it's mandatory on aarch64."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"CONFIG_KVM disabled"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The enabling of the tracer options should in theory allow for gathering information as to where latency issues might be present so might be useful at a later point."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"CONFIG_RCU_EXPERT enabled"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"CONFIG_SCHED_TRACER already enabled"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"CONFIG_HWLAT_TRACER enabled"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"CONFIG_OSNOISE_TRACER enabled"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"CONFIG_TIMERLAT_TRACER enabled"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This doesn't have an impact on latency but could be interesting for latency tests possibly."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThis is something I've enabled"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"CONFIG_HIST_TRIGGERS"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"realtime-pre-emption-model","depth":2,"text":"Realtime Pre-emption model"},{"id":"debian-realtime","depth":2,"text":"Debian Realtime"}]}},"_type":"markdown","_id":"content:1.os:4.optimise:1.kernelcfg.md","_source":"content","_file":"1.os/4.optimise/1.kernelcfg.md","_extension":"md"}