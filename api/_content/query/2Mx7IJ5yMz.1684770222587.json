{"_path":"/os/dietpi/image","_dir":"dietpi","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Creating a Disk Image","description":"The below is details on generating a DietPi disk image for distribution.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"creating-a-disk-image"},"children":[{"type":"text","value":"Creating a Disk Image"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The below is details on generating a DietPi disk image for distribution."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://dietpi.com/forum/t/shrinking-backup-image/6338/4","rel":["nofollow"]},"children":[{"type":"text","value":"https://dietpi.com/forum/t/shrinking-backup-image/6338/4"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://dietpi.com/forum/t/issues-creating-an-image-file-from-a-sd-card/4305","rel":["nofollow"]},"children":[{"type":"text","value":"https://dietpi.com/forum/t/issues-creating-an-image-file-from-a-sd-card/4305"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://dietpi.com/docs/hardware/#make-your-own-distribution","rel":["nofollow"]},"children":[{"type":"text","value":"https://dietpi.com/docs/hardware/#make-your-own-distribution"}]}]}]},{"type":"element","tag":"h2","props":{"id":"prep-operating-system"},"children":[{"type":"text","value":"Prep operating system"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"First we need to prepare the operating system"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Make sure to remove wifi settings from /boot/dietpi-wifi.txt"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Make sure to remove wifi settings from "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"dietpi-config"}]}]}]},{"type":"element","tag":"code","props":{"code":"# This will cause the root partition to resize / expand on next reboot\nsystemctl enable dietpi-fs_partition_resize\n\n# Shutdown the system\nshutdown -h now\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-fc490f"},"children":[{"type":"text","value":"# This will cause the root partition to resize / expand on next reboot\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-3e8209"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-90b944"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-769c7b"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-90b944"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-769c7b"},"children":[{"type":"text","value":"dietpi-fs_partition_resize\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-fc490f"},"children":[{"type":"text","value":"# Shutdown the system\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-3e8209"},"children":[{"type":"text","value":"shutdown"}]},{"type":"element","tag":"span","props":{"class":"ct-90b944"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-65b287"},"children":[{"type":"text","value":"-h"}]},{"type":"element","tag":"span","props":{"class":"ct-90b944"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-769c7b"},"children":[{"type":"text","value":"now"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"move-sd-card"},"children":[{"type":"text","value":"Move SD Card"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Next eject the SD card from the RPI."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nPut in a different SD card with a linux operating system on and boot this."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The SD Card we've ejected is the one we're going to image."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nPut the SD Card into a USB to SD card adapter then plug this into the Pi."}]},{"type":"element","tag":"h2","props":{"id":"generate-image"},"children":[{"type":"text","value":"Generate Image"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It's best to do this while root is mounted on a USB hard disk"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nSince we're creating and compressing some fairly big files"}]},{"type":"element","tag":"code","props":{"code":"# Create the image\ncd /home/dietpi\nbash -c \"$(curl -sSfL 'https://raw.githubusercontent.com/MichaIng/DietPi/master/.build/images/dietpi-imager')\"\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-fc490f"},"children":[{"type":"text","value":"# Create the image\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-65b287"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"class":"ct-90b944"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-769c7b"},"children":[{"type":"text","value":"/home/dietpi\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-3e8209"},"children":[{"type":"text","value":"bash"}]},{"type":"element","tag":"span","props":{"class":"ct-90b944"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-65b287"},"children":[{"type":"text","value":"-c"}]},{"type":"element","tag":"span","props":{"class":"ct-90b944"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-769c7b"},"children":[{"type":"text","value":"\"$("}]},{"type":"element","tag":"span","props":{"class":"ct-3e8209"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-769c7b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-65b287"},"children":[{"type":"text","value":"-sSfL"}]},{"type":"element","tag":"span","props":{"class":"ct-769c7b"},"children":[{"type":"text","value":" 'https://raw.githubusercontent.com/MichaIng/DietPi/master/.build/images/dietpi-imager')\""}]}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Select Drive as source (typically something like /dev/sdc)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Select the root volume on the drive (usually only one will show up which is the ext4 partition)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Select dd as cloning tool, DO NOT select Clonezilla installer, since this only works for x86_64 target systems"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Give it a Name"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Select Start"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Wait a while"}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-65b287{color:#0550AE}\n.ct-769c7b{color:#0A3069}\n.ct-90b944{color:#24292F}\n.ct-3e8209{color:#953800}\n.ct-fc490f{color:#6E7781}\n.dark .ct-fc490f{color:#8B949E}\n.dark .ct-3e8209{color:#FFA657}\n.dark .ct-90b944{color:#C9D1D9}\n.dark .ct-769c7b{color:#A5D6FF}\n.dark .ct-65b287{color:#79C0FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"prep-operating-system","depth":2,"text":"Prep operating system"},{"id":"move-sd-card","depth":2,"text":"Move SD Card"},{"id":"generate-image","depth":2,"text":"Generate Image"}]}},"_type":"markdown","_id":"content:1.os:1.dietpi:5.image.md","_source":"content","_file":"1.os/1.dietpi/5.image.md","_extension":"md"}