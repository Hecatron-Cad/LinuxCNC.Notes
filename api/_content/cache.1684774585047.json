{"generatedAt":1684774625005,"generateTime":44,"contents":[{"_path":"/","_dir":"","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Home","description":"This is just a collection of LinuxCNC Notes I've put together for installing LinuxCNC onto a RPi4.\nThe goal is to document how to install and get the best latency values I can.\nAs well as document setting up some configurations for some devices I'm working on.","navigation":false,"main":{"fluid":false},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"hecatronic-linuxcnc-notes"},"children":[{"type":"text","value":"Hecatronic LinuxCNC Notes"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This is just a collection of LinuxCNC Notes I've put together for installing LinuxCNC onto a RPi4."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThe goal is to document how to install and get the best latency values I can."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nAs well as document setting up some configurations for some devices I'm working on."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I'm currently using DietPi at the moment, but I may also try Armbian"}]},{"type":"element","tag":"list","props":{"type":"success"},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"It's basically raspian if used with a rpi"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"It's similar to dietpi in that anything not needed is left out by default"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"It has a set of helper utils for automatically setting up remote desktop / xfce etc"}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:0.index.md","_source":"content","_file":"0.index.md","_extension":"md"},{"_path":"/os/_dir","_dir":"os","_draft":false,"_partial":true,"_locale":"","title":"Operating System","_id":"content:1.os:_dir.yml","_type":"yaml","_source":"content","_file":"1.os/_dir.yml","_extension":"yml"},{"_path":"/os/dietpi/_dir","_dir":"dietpi","_draft":false,"_partial":true,"_locale":"","title":"DietPi","_id":"content:1.os:1.dietpi:_dir.yml","_type":"yaml","_source":"content","_file":"1.os/1.dietpi/_dir.yml","_extension":"yml"},{"_path":"/os/dietpi","_dir":"os","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Install","description":"Looking at the LinuxCNC docs for the operating system, ideally it should be something Debian based.\nThis is so we can use the existing apt Debian packages to install LinuxCNC","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"dietpi-installation"},"children":[{"type":"text","value":"DietPi Installation"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Looking at the LinuxCNC docs for the operating system, ideally it should be something Debian based."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThis is so we can use the existing apt Debian packages to install LinuxCNC"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In the case of DietPi it's a more strimmed down version of Raspian but still uses Raspian as a basis."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThere is also options for other hardware devices as well."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The different arch names for 64bit vs 32bit tend to be named:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"ARMv8 = 64bit for Rpi4 / Rpi3"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"ARMv7l = 32bit Rpi4"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"ARMv7 = 32bit RPI3"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"By default, dietpi is currently using Debian 11 (Bullseye), but what we need ideally is "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Debian 12 (Bookworm)"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nDebian 12 includes packages for linuxcnc userspace which makes things a lot easier."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nDietpi does distribute bookworm images under experimental."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://dietpi.com/downloads/images/","rel":["nofollow"]},"children":[{"type":"text","value":"https://dietpi.com/downloads/images/"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://dietpi.com/blog/?p=2809","rel":["nofollow"]},"children":[{"type":"text","value":"https://dietpi.com/blog/?p=2809"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://dietpi.com","rel":["nofollow"]},"children":[{"type":"text","value":"https://dietpi.com"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://dietpi.com/docs/install/","rel":["nofollow"]},"children":[{"type":"text","value":"https://dietpi.com/docs/install/"}]}]}]},{"type":"element","tag":"h2","props":{"id":"flash-image"},"children":[{"type":"text","value":"Flash Image"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Flashing the image can be done via "},{"type":"element","tag":"a","props":{"href":"https://www.balena.io/etcher","rel":["nofollow"]},"children":[{"type":"text","value":"Balena Etcher"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nAfter flashing eject then re-insert the card to gain access to the vfat boot partition if using Windows."}]},{"type":"element","tag":"h2","props":{"id":"setup-wi-fi"},"children":[{"type":"text","value":"Setup Wi-Fi"}]},{"type":"element","tag":"code","props":{"code":"# Within dietpi.txt set the following\nAUTO_SETUP_NET_WIFI_ENABLED=1\n# Within dietpi-wifi.txt set the following\naWIFI_SSID[0]='MySSID'\naWIFI_KEY[0]='MyWifiKey'\n","language":"py","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9e865"},"children":[{"type":"text","value":"# Within dietpi.txt set the following\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-5f790f"},"children":[{"type":"text","value":"AUTO_SETUP_NET_WIFI_ENABLED"}]},{"type":"element","tag":"span","props":{"class":"ct-78bc03"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-5f790f"},"children":[{"type":"text","value":"1\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9e865"},"children":[{"type":"text","value":"# Within dietpi-wifi.txt set the following\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-17d206"},"children":[{"type":"text","value":"aWIFI_SSID["}]},{"type":"element","tag":"span","props":{"class":"ct-5f790f"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-17d206"},"children":[{"type":"text","value":"]"}]},{"type":"element","tag":"span","props":{"class":"ct-78bc03"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-5131ca"},"children":[{"type":"text","value":"'MySSID'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-17d206"},"children":[{"type":"text","value":"aWIFI_KEY["}]},{"type":"element","tag":"span","props":{"class":"ct-5f790f"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-17d206"},"children":[{"type":"text","value":"]"}]},{"type":"element","tag":"span","props":{"class":"ct-78bc03"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-5131ca"},"children":[{"type":"text","value":"'MyWifiKey'"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"logon"},"children":[{"type":"text","value":"Logon"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"On first login, DietPi will automatically update."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThe default login details are"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"username = root"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"password = dietpi"}]}]},{"type":"element","tag":"h2","props":{"id":"disable-mouse-on-vim"},"children":[{"type":"text","value":"Disable Mouse on Vim"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This helps when copying / pasting over a Putty (or Kitty which is better) ssh session"}]},{"type":"element","tag":"code","props":{"code":"apt install vim\necho \"set mouse-=a\" >> ~/.vimrc\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-e877a9"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-17d206"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5131ca"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-17d206"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5131ca"},"children":[{"type":"text","value":"vim\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-5f790f"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-17d206"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5131ca"},"children":[{"type":"text","value":"\"set mouse-=a\""}]},{"type":"element","tag":"span","props":{"class":"ct-17d206"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-78bc03"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-17d206"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5131ca"},"children":[{"type":"text","value":"~/.vimrc"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-e877a9{color:#953800}\n.ct-5131ca{color:#0A3069}\n.ct-17d206{color:#24292F}\n.ct-78bc03{color:#CF222E}\n.ct-5f790f{color:#0550AE}\n.ct-c9e865{color:#6E7781}\n.dark .ct-c9e865{color:#8B949E}\n.dark .ct-5f790f{color:#79C0FF}\n.dark .ct-78bc03{color:#FF7B72}\n.dark .ct-17d206{color:#C9D1D9}\n.dark .ct-5131ca{color:#A5D6FF}\n.dark .ct-e877a9{color:#FFA657}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"flash-image","depth":2,"text":"Flash Image"},{"id":"setup-wi-fi","depth":2,"text":"Setup Wi-Fi"},{"id":"logon","depth":2,"text":"Logon"},{"id":"disable-mouse-on-vim","depth":2,"text":"Disable Mouse on Vim"}]}},"_type":"markdown","_id":"content:1.os:1.dietpi:0.index.md","_source":"content","_file":"1.os/1.dietpi/0.index.md","_extension":"md"},{"_path":"/os/dietpi/cmd","_dir":"dietpi","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Commands","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"useful-commands"},"children":[{"type":"text","value":"Useful Commands"}]},{"type":"element","tag":"h2","props":{"id":"dietpi"},"children":[{"type":"text","value":"DietPi"}]},{"type":"element","tag":"code","props":{"code":"# All the DietPi programs in one place\ndietpi-launcher\n# Set the configuration, such as a menu for selecting wifi details.\ndietpi-config\n# This installs / uninstalls software\n# But also sets up a default configuration such as for xrdp making life a lot easier\ndietpi-software\n# Resource monitor\nhtop\n# Shows CPU information and stats\ncpu\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9651a"},"children":[{"type":"text","value":"# All the DietPi programs in one place\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-7e8d62"},"children":[{"type":"text","value":"dietpi-launcher\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9651a"},"children":[{"type":"text","value":"# Set the configuration, such as a menu for selecting wifi details.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-7e8d62"},"children":[{"type":"text","value":"dietpi-config\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9651a"},"children":[{"type":"text","value":"# This installs / uninstalls software\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9651a"},"children":[{"type":"text","value":"# But also sets up a default configuration such as for xrdp making life a lot easier\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-7e8d62"},"children":[{"type":"text","value":"dietpi-software\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9651a"},"children":[{"type":"text","value":"# Resource monitor\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-7e8d62"},"children":[{"type":"text","value":"htop\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9651a"},"children":[{"type":"text","value":"# Shows CPU information and stats\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-7e8d62"},"children":[{"type":"text","value":"cpu"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"updates"},"children":[{"type":"text","value":"Updates"}]},{"type":"element","tag":"code","props":{"code":"# To update the local distro\napt update\napt upgrade\napt dist-upgrade\n\n# This can pick up on config changes / patches sometimes\n# Which fall outside of apt update\ndietpi-update\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9651a"},"children":[{"type":"text","value":"# To update the local distro\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-7e8d62"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-afd246"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca1c62"},"children":[{"type":"text","value":"update\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-7e8d62"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-afd246"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca1c62"},"children":[{"type":"text","value":"upgrade\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-7e8d62"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-afd246"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca1c62"},"children":[{"type":"text","value":"dist-upgrade\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9651a"},"children":[{"type":"text","value":"# This can pick up on config changes / patches sometimes\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9651a"},"children":[{"type":"text","value":"# Which fall outside of apt update\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-7e8d62"},"children":[{"type":"text","value":"dietpi-update"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"versions"},"children":[{"type":"text","value":"Versions"}]},{"type":"element","tag":"code","props":{"code":"# To determine the kernel version\nuname -a\n\n# To determine the debian release the os is based on\ncat /etc/os-release\n\n# To show if the OS is 32bit / 64bit\n\n# First method\napt install lshw \nlshw | head -6\n\n# Second method\ngetconf LONG_BIT\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9651a"},"children":[{"type":"text","value":"# To determine the kernel version\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-7e8d62"},"children":[{"type":"text","value":"uname"}]},{"type":"element","tag":"span","props":{"class":"ct-afd246"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9c55e5"},"children":[{"type":"text","value":"-a\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9651a"},"children":[{"type":"text","value":"# To determine the debian release the os is based on\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-7e8d62"},"children":[{"type":"text","value":"cat"}]},{"type":"element","tag":"span","props":{"class":"ct-afd246"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca1c62"},"children":[{"type":"text","value":"/etc/os-release\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9651a"},"children":[{"type":"text","value":"# To show if the OS is 32bit / 64bit\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9651a"},"children":[{"type":"text","value":"# First method\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-7e8d62"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-afd246"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca1c62"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-afd246"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca1c62"},"children":[{"type":"text","value":"lshw"}]},{"type":"element","tag":"span","props":{"class":"ct-afd246"},"children":[{"type":"text","value":" \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-7e8d62"},"children":[{"type":"text","value":"lshw"}]},{"type":"element","tag":"span","props":{"class":"ct-afd246"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2afcfc"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-afd246"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7e8d62"},"children":[{"type":"text","value":"head"}]},{"type":"element","tag":"span","props":{"class":"ct-afd246"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9c55e5"},"children":[{"type":"text","value":"-6\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9651a"},"children":[{"type":"text","value":"# Second method\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-7e8d62"},"children":[{"type":"text","value":"getconf"}]},{"type":"element","tag":"span","props":{"class":"ct-afd246"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca1c62"},"children":[{"type":"text","value":"LONG_BIT"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-2afcfc{color:#CF222E}\n.ct-9c55e5{color:#0550AE}\n.ct-ca1c62{color:#0A3069}\n.ct-afd246{color:#24292F}\n.ct-7e8d62{color:#953800}\n.ct-c9651a{color:#6E7781}\n.dark .ct-c9651a{color:#8B949E}\n.dark .ct-7e8d62{color:#FFA657}\n.dark .ct-afd246{color:#C9D1D9}\n.dark .ct-ca1c62{color:#A5D6FF}\n.dark .ct-9c55e5{color:#79C0FF}\n.dark .ct-2afcfc{color:#FF7B72}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"dietpi","depth":2,"text":"DietPi"},{"id":"updates","depth":2,"text":"Updates"},{"id":"versions","depth":2,"text":"Versions"}]}},"_type":"markdown","_id":"content:1.os:1.dietpi:1.cmd.md","_source":"content","_file":"1.os/1.dietpi/1.cmd.md","_extension":"md"},{"_path":"/os/dietpi/hard-disk","_dir":"dietpi","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Hard Disk Setup","description":"Below are the details on moving the root volume for an RPI from the SD card to a USB hard disk.\nThis can be useful when doing development work or something that requires a lot of writes to the disk.\nOne example would be compiling a new Linux kernel.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"hard-disk-setup"},"children":[{"type":"text","value":"Hard Disk Setup"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Below are the details on moving the root volume for an RPI from the SD card to a USB hard disk."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThis can be useful when doing development work or something that requires a lot of writes to the disk."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nOne example would be compiling a new Linux kernel."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note I've setup a partition for swap in case I want to use it later"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nbut I'm avoiding using it to get better latency performance"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The first step is to partition the disk using fdisk, I'm assuming a partition layout of the following:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"/dev/sda1 - boot (vfat not used)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"/dev/sda2 - swap (swap partition) - not used"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"/dev/sda3 - root (ext4)"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It's possible to set the EEPROM to boot directly from a USB disk."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nBut for now I'm avoiding that so that I have the option to just boot from an SD card."}]},{"type":"element","tag":"h2","props":{"id":"format-partitions"},"children":[{"type":"text","value":"Format Partitions"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note this will destroy data on the drive."}]},{"type":"element","tag":"code","props":{"code":"# Format the swap parition\n/sbin/mkswap /dev/sda2\n# Format the HD Root partition\n/sbin/mke2fs -t ext4 -L rootfs /dev/sda3\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-54dcab"},"children":[{"type":"text","value":"# Format the swap parition\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-19bf0a"},"children":[{"type":"text","value":"/sbin/mkswap"}]},{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b1fd11"},"children":[{"type":"text","value":"/dev/sda2\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-54dcab"},"children":[{"type":"text","value":"# Format the HD Root partition\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-19bf0a"},"children":[{"type":"text","value":"/sbin/mke2fs"}]},{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3dbc5f"},"children":[{"type":"text","value":"-t"}]},{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b1fd11"},"children":[{"type":"text","value":"ext4"}]},{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3dbc5f"},"children":[{"type":"text","value":"-L"}]},{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b1fd11"},"children":[{"type":"text","value":"rootfs"}]},{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b1fd11"},"children":[{"type":"text","value":"/dev/sda3"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"copy-root-volume-across"},"children":[{"type":"text","value":"Copy root volume across"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We can use rsync to copy across the root volume data."}]},{"type":"element","tag":"code","props":{"code":"# mount the new root volume\nmkdir -p /mnt/hdroot\nmount -t auto /dev/sda3 /mnt/hdroot\n\n# Copy the root volume across\napt install rsync\nrsync -axv / /mnt/hdroot\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-54dcab"},"children":[{"type":"text","value":"# mount the new root volume\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-19bf0a"},"children":[{"type":"text","value":"mkdir"}]},{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3dbc5f"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b1fd11"},"children":[{"type":"text","value":"/mnt/hdroot\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-19bf0a"},"children":[{"type":"text","value":"mount"}]},{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3dbc5f"},"children":[{"type":"text","value":"-t"}]},{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b1fd11"},"children":[{"type":"text","value":"auto"}]},{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b1fd11"},"children":[{"type":"text","value":"/dev/sda3"}]},{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b1fd11"},"children":[{"type":"text","value":"/mnt/hdroot\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-54dcab"},"children":[{"type":"text","value":"# Copy the root volume across\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-19bf0a"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b1fd11"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b1fd11"},"children":[{"type":"text","value":"rsync\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-19bf0a"},"children":[{"type":"text","value":"rsync"}]},{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3dbc5f"},"children":[{"type":"text","value":"-axv"}]},{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b1fd11"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b1fd11"},"children":[{"type":"text","value":"/mnt/hdroot"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"edit-fstab"},"children":[{"type":"text","value":"Edit fstab"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Next we need to edit the fstab file for the root volume on the USB disk."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nRun "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/sbin/blkid /dev/sda3"}]},{"type":"text","value":" to get the partition UUID then substitute it within the config"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nNote we've commented out the swap partition here"}]},{"type":"element","tag":"code","props":{"code":"# Get the partition unique id\n# this will report a unique number, something like 939aac7c-03, 939aac7c-02\n# /dev/sda3: LABEL=\"rootfs\" UUID=\"3eac140f-5f87-402a-b5bf-9ff1fb881bc4\" BLOCK_SIZE=\"4096\" TYPE=\"ext4\" PARTUUID=\"939aac7c-03\"\n/sbin/blkid /dev/sda2\n/sbin/blkid /dev/sda3\n\n# Open up the fstabl file on the usb disk\nvim /mnt/hdroot/etc/fstab\n\n# Original Example\nPARTUUID=a0998a78-02  / ext4 noatime,lazytime,rw 0 1\n/var/swap none swap sw\n\n# New Example\nPARTUUID=939aac7c-03  /  ext4  noatime,lazytime,rw 0 1\n# We avoid enabling swap to get better latency\n#PARTUUID=939aac7c-02  sw swap  none                0 0\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-54dcab"},"children":[{"type":"text","value":"# Get the partition unique id\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-54dcab"},"children":[{"type":"text","value":"# this will report a unique number, something like 939aac7c-03, 939aac7c-02\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-54dcab"},"children":[{"type":"text","value":"# /dev/sda3: LABEL=\"rootfs\" UUID=\"3eac140f-5f87-402a-b5bf-9ff1fb881bc4\" BLOCK_SIZE=\"4096\" TYPE=\"ext4\" PARTUUID=\"939aac7c-03\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-19bf0a"},"children":[{"type":"text","value":"/sbin/blkid"}]},{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b1fd11"},"children":[{"type":"text","value":"/dev/sda2\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-19bf0a"},"children":[{"type":"text","value":"/sbin/blkid"}]},{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b1fd11"},"children":[{"type":"text","value":"/dev/sda3\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-54dcab"},"children":[{"type":"text","value":"# Open up the fstabl file on the usb disk\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-19bf0a"},"children":[{"type":"text","value":"vim"}]},{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b1fd11"},"children":[{"type":"text","value":"/mnt/hdroot/etc/fstab\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-54dcab"},"children":[{"type":"text","value":"# Original Example\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":"PARTUUID"}]},{"type":"element","tag":"span","props":{"class":"ct-5deedb"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b1fd11"},"children":[{"type":"text","value":"a0998a78-"}]},{"type":"element","tag":"span","props":{"class":"ct-5deedb"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-3dbc5f"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":"  / ext4 noatime,lazytime,rw "}]},{"type":"element","tag":"span","props":{"class":"ct-3dbc5f"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3dbc5f"},"children":[{"type":"text","value":"1\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-19bf0a"},"children":[{"type":"text","value":"/var/swap"}]},{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b1fd11"},"children":[{"type":"text","value":"none"}]},{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b1fd11"},"children":[{"type":"text","value":"swap"}]},{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b1fd11"},"children":[{"type":"text","value":"sw\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-54dcab"},"children":[{"type":"text","value":"# New Example\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":"PARTUUID"}]},{"type":"element","tag":"span","props":{"class":"ct-5deedb"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b1fd11"},"children":[{"type":"text","value":"939aac7c-"}]},{"type":"element","tag":"span","props":{"class":"ct-5deedb"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-3dbc5f"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":"  /  ext4  noatime,lazytime,rw "}]},{"type":"element","tag":"span","props":{"class":"ct-3dbc5f"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3dbc5f"},"children":[{"type":"text","value":"1\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-54dcab"},"children":[{"type":"text","value":"# We avoid enabling swap to get better latency\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-54dcab"},"children":[{"type":"text","value":"#PARTUUID=939aac7c-02  sw swap  none                0 0"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Finally, we can unmount the root partition with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"unmount /mnt/hdroot"}]}]},{"type":"element","tag":"h2","props":{"id":"alter-the-boot-configuration"},"children":[{"type":"text","value":"Alter the Boot Configuration"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Next we need to set the configuration on the SD card to boot to the USB disk."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nInstead of the root volume on the SD card."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nWe can do this by editing the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/boot/cmdline.txt"}]},{"type":"text","value":" file to point to the new partition"}]},{"type":"element","tag":"code","props":{"code":"# Make a backup of the file in case we want to switch back to the SD card\ncp /boot/cmdline.txt /boot/cmdline.txt.sdcard\n\n# Edit the file\nvim /boot/cmdline.txt\n\n# Original Example\nroot=PARTUUID=a0998a78-02 rootfstype=ext4 rootwait net.ifnames=0 logo.nologo console=tty1\n\n# New Example\nroot=PARTUUID=939aac7c-03 rootfstype=ext4 rootwait net.ifnames=0 logo.nologo console=tty1\n\n# Make a backup of the file\ncp /boot/cmdline.txt /boot/cmdline.txt.hd\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-54dcab"},"children":[{"type":"text","value":"# Make a backup of the file in case we want to switch back to the SD card\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-19bf0a"},"children":[{"type":"text","value":"cp"}]},{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b1fd11"},"children":[{"type":"text","value":"/boot/cmdline.txt"}]},{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b1fd11"},"children":[{"type":"text","value":"/boot/cmdline.txt.sdcard\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-54dcab"},"children":[{"type":"text","value":"# Edit the file\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-19bf0a"},"children":[{"type":"text","value":"vim"}]},{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b1fd11"},"children":[{"type":"text","value":"/boot/cmdline.txt\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-54dcab"},"children":[{"type":"text","value":"# Original Example\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":"root"}]},{"type":"element","tag":"span","props":{"class":"ct-5deedb"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b1fd11"},"children":[{"type":"text","value":"PARTUUID=a0998a78-"}]},{"type":"element","tag":"span","props":{"class":"ct-5deedb"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-3dbc5f"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":" rootfstype"}]},{"type":"element","tag":"span","props":{"class":"ct-5deedb"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b1fd11"},"children":[{"type":"text","value":"ext4"}]},{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":" rootwait net.ifnames"}]},{"type":"element","tag":"span","props":{"class":"ct-5deedb"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3dbc5f"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":" logo.nologo console"}]},{"type":"element","tag":"span","props":{"class":"ct-5deedb"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b1fd11"},"children":[{"type":"text","value":"tty1\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-54dcab"},"children":[{"type":"text","value":"# New Example\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":"root"}]},{"type":"element","tag":"span","props":{"class":"ct-5deedb"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b1fd11"},"children":[{"type":"text","value":"PARTUUID=939aac7c-"}]},{"type":"element","tag":"span","props":{"class":"ct-5deedb"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-3dbc5f"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":" rootfstype"}]},{"type":"element","tag":"span","props":{"class":"ct-5deedb"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b1fd11"},"children":[{"type":"text","value":"ext4"}]},{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":" rootwait net.ifnames"}]},{"type":"element","tag":"span","props":{"class":"ct-5deedb"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3dbc5f"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":" logo.nologo console"}]},{"type":"element","tag":"span","props":{"class":"ct-5deedb"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b1fd11"},"children":[{"type":"text","value":"tty1\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-54dcab"},"children":[{"type":"text","value":"# Make a backup of the file\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-19bf0a"},"children":[{"type":"text","value":"cp"}]},{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b1fd11"},"children":[{"type":"text","value":"/boot/cmdline.txt"}]},{"type":"element","tag":"span","props":{"class":"ct-030782"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b1fd11"},"children":[{"type":"text","value":"/boot/cmdline.txt.hd"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Then reboot to switch to the root volume on the hard disk."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nIf for any reason something goes wrong, you can just open up the SD Card boot partition"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n(since it's vfat) on another machine and copy the backed up file "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cmdline.txt.sdcard"}]},{"type":"text","value":" to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cmdline.txt"}]},{"type":"text","value":"."}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-5deedb{color:#CF222E}\n.ct-3dbc5f{color:#0550AE}\n.ct-b1fd11{color:#0A3069}\n.ct-030782{color:#24292F}\n.ct-19bf0a{color:#953800}\n.ct-54dcab{color:#6E7781}\n.dark .ct-54dcab{color:#8B949E}\n.dark .ct-19bf0a{color:#FFA657}\n.dark .ct-030782{color:#C9D1D9}\n.dark .ct-b1fd11{color:#A5D6FF}\n.dark .ct-3dbc5f{color:#79C0FF}\n.dark .ct-5deedb{color:#FF7B72}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"format-partitions","depth":2,"text":"Format Partitions"},{"id":"copy-root-volume-across","depth":2,"text":"Copy root volume across"},{"id":"edit-fstab","depth":2,"text":"Edit fstab"},{"id":"alter-the-boot-configuration","depth":2,"text":"Alter the Boot Configuration"}]}},"_type":"markdown","_id":"content:1.os:1.dietpi:2.hard-disk.md","_source":"content","_file":"1.os/1.dietpi/2.hard-disk.md","_extension":"md"},{"_path":"/os/dietpi/drivesleep","_dir":"dietpi","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Disk Sleep","description":"This seems to only be an issue with the RPI3 when using a USB Hard disk.\nWith the RPI4 it uses a different USB Controller and uses UAS instead which provides better performance and doesn't have the same problems.\nSo for a RPI4 you can ignore this.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"disk-sleep"},"children":[{"type":"text","value":"Disk Sleep"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This seems to only be an issue with the RPI3 when using a USB Hard disk."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nWith the RPI4 it uses a different USB Controller and uses UAS instead which provides better performance and doesn't have the same problems."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nSo for a RPI4 you can ignore this."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I did notice with the RPI3 it would continually sleep the drive almost straight away."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nWith the RPI4 this doesn't seem to be an issue since it uses UAS, however this does mean we can't use smartmon tools with the RPI4 to check the disk SMART status."}]},{"type":"element","tag":"h2","props":{"id":"rpi3-disk-sleep"},"children":[{"type":"text","value":"RPI3 Disk Sleep"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"With a USB Drive attached, sometimes it will go into sleep continuously."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThere's a couple of ways to work around this."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"First install some tools."}]},{"type":"element","tag":"code","props":{"code":"apt install hdparm smartmontools\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-c542c9"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-8dab8a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3999b2"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-8dab8a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3999b2"},"children":[{"type":"text","value":"hdparm"}]},{"type":"element","tag":"span","props":{"class":"ct-8dab8a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3999b2"},"children":[{"type":"text","value":"smartmontools"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The first approach is to try disabling the spinddown using "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"dietpi-drive_manager"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nAnother approach is to use hdparm to disable advanced power management"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nthis seems to be necessary in some cases as some drives ignore the timeout."}]},{"type":"element","tag":"code","props":{"code":"# Get drive info\nsmartctl -i /dev/sda\n# Check drive health\nsmartctl -H /dev/sda\n\n# To check drive sleep status without waking it up\nsmartctl -i -n standby /dev/sda\n\n# To check the advanced power management value (default is 127)\nhdparm -B /dev/sda\n# To disable advanced power management\nhdparm -B 255 /dev/sda\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-ba6ca2"},"children":[{"type":"text","value":"# Get drive info\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-c542c9"},"children":[{"type":"text","value":"smartctl"}]},{"type":"element","tag":"span","props":{"class":"ct-8dab8a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f1f21a"},"children":[{"type":"text","value":"-i"}]},{"type":"element","tag":"span","props":{"class":"ct-8dab8a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3999b2"},"children":[{"type":"text","value":"/dev/sda\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-ba6ca2"},"children":[{"type":"text","value":"# Check drive health\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-c542c9"},"children":[{"type":"text","value":"smartctl"}]},{"type":"element","tag":"span","props":{"class":"ct-8dab8a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f1f21a"},"children":[{"type":"text","value":"-H"}]},{"type":"element","tag":"span","props":{"class":"ct-8dab8a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3999b2"},"children":[{"type":"text","value":"/dev/sda\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-ba6ca2"},"children":[{"type":"text","value":"# To check drive sleep status without waking it up\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-c542c9"},"children":[{"type":"text","value":"smartctl"}]},{"type":"element","tag":"span","props":{"class":"ct-8dab8a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f1f21a"},"children":[{"type":"text","value":"-i"}]},{"type":"element","tag":"span","props":{"class":"ct-8dab8a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f1f21a"},"children":[{"type":"text","value":"-n"}]},{"type":"element","tag":"span","props":{"class":"ct-8dab8a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3999b2"},"children":[{"type":"text","value":"standby"}]},{"type":"element","tag":"span","props":{"class":"ct-8dab8a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3999b2"},"children":[{"type":"text","value":"/dev/sda\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-ba6ca2"},"children":[{"type":"text","value":"# To check the advanced power management value (default is 127)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-c542c9"},"children":[{"type":"text","value":"hdparm"}]},{"type":"element","tag":"span","props":{"class":"ct-8dab8a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f1f21a"},"children":[{"type":"text","value":"-B"}]},{"type":"element","tag":"span","props":{"class":"ct-8dab8a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3999b2"},"children":[{"type":"text","value":"/dev/sda\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-ba6ca2"},"children":[{"type":"text","value":"# To disable advanced power management\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-c542c9"},"children":[{"type":"text","value":"hdparm"}]},{"type":"element","tag":"span","props":{"class":"ct-8dab8a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f1f21a"},"children":[{"type":"text","value":"-B"}]},{"type":"element","tag":"span","props":{"class":"ct-8dab8a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f1f21a"},"children":[{"type":"text","value":"255"}]},{"type":"element","tag":"span","props":{"class":"ct-8dab8a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3999b2"},"children":[{"type":"text","value":"/dev/sda"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"run-on-boot"},"children":[{"type":"text","value":"Run on Boot"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To set this to run on boot up (as it reset between reboots)"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Create the file "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/var/lib/dietpi/postboot.d/hd.nosleep.sh"}]}]},{"type":"element","tag":"code","props":{"code":"#!/bin/sh\nhdparm -B 255 /dev/sda\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-ba6ca2"},"children":[{"type":"text","value":"#!/bin/sh\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-c542c9"},"children":[{"type":"text","value":"hdparm"}]},{"type":"element","tag":"span","props":{"class":"ct-8dab8a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f1f21a"},"children":[{"type":"text","value":"-B"}]},{"type":"element","tag":"span","props":{"class":"ct-8dab8a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f1f21a"},"children":[{"type":"text","value":"255"}]},{"type":"element","tag":"span","props":{"class":"ct-8dab8a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3999b2"},"children":[{"type":"text","value":"/dev/sda"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Make sure the file is executable"}]},{"type":"element","tag":"code","props":{"code":"chmod +x /var/lib/dietpi/postboot.d/hd.nosleep.sh\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-c542c9"},"children":[{"type":"text","value":"chmod"}]},{"type":"element","tag":"span","props":{"class":"ct-8dab8a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3999b2"},"children":[{"type":"text","value":"+x"}]},{"type":"element","tag":"span","props":{"class":"ct-8dab8a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3999b2"},"children":[{"type":"text","value":"/var/lib/dietpi/postboot.d/hd.nosleep.sh"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-f1f21a{color:#0550AE}\n.ct-ba6ca2{color:#6E7781}\n.ct-3999b2{color:#0A3069}\n.ct-8dab8a{color:#24292F}\n.ct-c542c9{color:#953800}\n.dark .ct-c542c9{color:#FFA657}\n.dark .ct-8dab8a{color:#C9D1D9}\n.dark .ct-3999b2{color:#A5D6FF}\n.dark .ct-ba6ca2{color:#8B949E}\n.dark .ct-f1f21a{color:#79C0FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"rpi3-disk-sleep","depth":2,"text":"RPI3 Disk Sleep","children":[{"id":"run-on-boot","depth":3,"text":"Run on Boot"}]}]}},"_type":"markdown","_id":"content:1.os:1.dietpi:3.drivesleep.md","_source":"content","_file":"1.os/1.dietpi/3.drivesleep.md","_extension":"md"},{"_path":"/os/dietpi/tools","_dir":"dietpi","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Other Tools","description":"There are some other tools that can be installed via the dietpi-software command","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"other-tools"},"children":[{"type":"text","value":"Other Tools"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There are some other tools that can be installed via the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"dietpi-software"}]},{"type":"text","value":" command"}]},{"type":"element","tag":"h2","props":{"id":"desktop"},"children":[{"type":"text","value":"Desktop"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We can install xfce via "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"dietpi-software"}]},{"type":"text","value":"."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nIf it's installed via this route instead of directly installing with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"apt get"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThis also automatically configures the software to just work, without any additional messing with configuration files."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"One of the options you're given when setting up the desktop is the GPU / Memory Split."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThe RPI takes some of the existing memory (2Gb / 4Gb / 8Gb) then partitions it off for the GPU."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nBy default the setting is around 76Mb."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nI don't think it makes a difference but if you have memory to spare you can set it to something much bigger such as 256Mb"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To change if the desktop automatically shows on bootup."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"dietpi-config"}]},{"type":"text","value":" Then select "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Auto Start Options"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nFollowed by auto login under Desktops."}]},{"type":"element","tag":"h2","props":{"id":"gthumb"},"children":[{"type":"text","value":"GThumb"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"GThumb is useful as a basic image viewer, for viewing latency PNG diagrams"}]},{"type":"element","tag":"code","props":{"code":"apt install gthumb\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-968e97"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-7b9f1c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3d6b33"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-7b9f1c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3d6b33"},"children":[{"type":"text","value":"gthumb"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"dietpi-dashboard"},"children":[{"type":"text","value":"DietPi Dashboard"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"One handy tools is dietpi-dashboard."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThis allows getting the status such as temperature / memory / CPU usage and an interactive shell via a web interface."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nTypically, after installing via "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"dietpi-software"}]},{"type":"text","value":" it will be visible under:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"http://x.x.x.x:5252/","rel":["nofollow"]},"children":[{"type":"text","value":"http://x.x.x.x:5252/"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I've checked this running with the latency histogram and I'm fairly sure it's safe to run."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nOn top of that you gain the ability to upload files via the web interface (such as G-Code)."}]},{"type":"element","tag":"h2","props":{"id":"remote-desktop"},"children":[{"type":"text","value":"Remote Desktop"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I'd avoid any form of remote desktop to the machine"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"xrdp works but causes more latency"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"nomachine works but also causes more latency"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"TigerVNC / RealVNC both seem to have issues"}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-3d6b33{color:#0A3069}\n.ct-7b9f1c{color:#24292F}\n.ct-968e97{color:#953800}\n.dark .ct-968e97{color:#FFA657}\n.dark .ct-7b9f1c{color:#C9D1D9}\n.dark .ct-3d6b33{color:#A5D6FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"desktop","depth":2,"text":"Desktop"},{"id":"gthumb","depth":2,"text":"GThumb"},{"id":"dietpi-dashboard","depth":2,"text":"DietPi Dashboard"},{"id":"remote-desktop","depth":2,"text":"Remote Desktop"}]}},"_type":"markdown","_id":"content:1.os:1.dietpi:4.tools.md","_source":"content","_file":"1.os/1.dietpi/4.tools.md","_extension":"md"},{"_path":"/os/dietpi/image","_dir":"dietpi","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Creating a Disk Image","description":"The below is details on generating a DietPi disk image for distribution.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"creating-a-disk-image"},"children":[{"type":"text","value":"Creating a Disk Image"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The below is details on generating a DietPi disk image for distribution."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://dietpi.com/forum/t/shrinking-backup-image/6338/4","rel":["nofollow"]},"children":[{"type":"text","value":"https://dietpi.com/forum/t/shrinking-backup-image/6338/4"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://dietpi.com/forum/t/issues-creating-an-image-file-from-a-sd-card/4305","rel":["nofollow"]},"children":[{"type":"text","value":"https://dietpi.com/forum/t/issues-creating-an-image-file-from-a-sd-card/4305"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://dietpi.com/docs/hardware/#make-your-own-distribution","rel":["nofollow"]},"children":[{"type":"text","value":"https://dietpi.com/docs/hardware/#make-your-own-distribution"}]}]}]},{"type":"element","tag":"h2","props":{"id":"prep-operating-system"},"children":[{"type":"text","value":"Prep operating system"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"First we need to prepare the operating system"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Make sure to remove wifi settings from /boot/dietpi-wifi.txt"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Make sure to remove wifi settings from "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"dietpi-config"}]}]}]},{"type":"element","tag":"code","props":{"code":"# This will cause the root partition to resize / expand on next reboot\nsystemctl enable dietpi-fs_partition_resize\n\n# Shutdown the system\nshutdown -h now\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-a38f7d"},"children":[{"type":"text","value":"# This will cause the root partition to resize / expand on next reboot\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-0ff5dd"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-453415"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cdb30"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-453415"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cdb30"},"children":[{"type":"text","value":"dietpi-fs_partition_resize\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-a38f7d"},"children":[{"type":"text","value":"# Shutdown the system\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-0ff5dd"},"children":[{"type":"text","value":"shutdown"}]},{"type":"element","tag":"span","props":{"class":"ct-453415"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-209174"},"children":[{"type":"text","value":"-h"}]},{"type":"element","tag":"span","props":{"class":"ct-453415"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cdb30"},"children":[{"type":"text","value":"now"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"move-sd-card"},"children":[{"type":"text","value":"Move SD Card"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Next eject the SD card from the RPI."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nPut in a different SD card with a linux operating system on and boot this."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The SD Card we've ejected is the one we're going to image."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nPut the SD Card into a USB to SD card adapter then plug this into the Pi."}]},{"type":"element","tag":"h2","props":{"id":"generate-image"},"children":[{"type":"text","value":"Generate Image"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It's best to do this while root is mounted on a USB hard disk"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nSince we're creating and compressing some fairly big files"}]},{"type":"element","tag":"code","props":{"code":"# Create the image\ncd /home/dietpi\nbash -c \"$(curl -sSfL 'https://raw.githubusercontent.com/MichaIng/DietPi/master/.build/images/dietpi-imager')\"\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-a38f7d"},"children":[{"type":"text","value":"# Create the image\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-209174"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"class":"ct-453415"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cdb30"},"children":[{"type":"text","value":"/home/dietpi\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-0ff5dd"},"children":[{"type":"text","value":"bash"}]},{"type":"element","tag":"span","props":{"class":"ct-453415"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-209174"},"children":[{"type":"text","value":"-c"}]},{"type":"element","tag":"span","props":{"class":"ct-453415"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7cdb30"},"children":[{"type":"text","value":"\"$("}]},{"type":"element","tag":"span","props":{"class":"ct-0ff5dd"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-7cdb30"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-209174"},"children":[{"type":"text","value":"-sSfL"}]},{"type":"element","tag":"span","props":{"class":"ct-7cdb30"},"children":[{"type":"text","value":" 'https://raw.githubusercontent.com/MichaIng/DietPi/master/.build/images/dietpi-imager')\""}]}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Select Drive as source (typically something like /dev/sdc)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Select the root volume on the drive (usually only one will show up which is the ext4 partition)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Select dd as cloning tool, DO NOT select Clonezilla installer, since this only works for x86_64 target systems"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Give it a Name"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Select Start"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Wait a while"}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-209174{color:#0550AE}\n.ct-7cdb30{color:#0A3069}\n.ct-453415{color:#24292F}\n.ct-0ff5dd{color:#953800}\n.ct-a38f7d{color:#6E7781}\n.dark .ct-a38f7d{color:#8B949E}\n.dark .ct-0ff5dd{color:#FFA657}\n.dark .ct-453415{color:#C9D1D9}\n.dark .ct-7cdb30{color:#A5D6FF}\n.dark .ct-209174{color:#79C0FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"prep-operating-system","depth":2,"text":"Prep operating system"},{"id":"move-sd-card","depth":2,"text":"Move SD Card"},{"id":"generate-image","depth":2,"text":"Generate Image"}]}},"_type":"markdown","_id":"content:1.os:1.dietpi:5.image.md","_source":"content","_file":"1.os/1.dietpi/5.image.md","_extension":"md"},{"_path":"/os/armbian/notes","_dir":"armbian","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Title of the page","description":"","draft":true,"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"notes"},"children":[{"type":"text","value":"Notes"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:1.os:2.armbian:1.notes.md","_source":"content","_file":"1.os/2.armbian/1.notes.md","_extension":"md"},{"_path":"/os/armbian/todo","_dir":"armbian","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Armbian Notes","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"armbian-notes"},"children":[{"type":"text","value":"Armbian Notes"}]},{"type":"element","tag":"h2","props":{"id":"supported-version"},"children":[{"type":"text","value":"Supported Version"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The supported version of Arbmian for the RPI4 appears to be based on Ubuntu instead of Raspian"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.armbian.com/rpi4b/","rel":["nofollow"]},"children":[{"type":"text","value":"https://www.armbian.com/rpi4b/"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Armbian 23.02 Jammy"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Ubuntu 22.04.02 LTS"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The debian version it's based on appears to be bookworm (which is what we want)"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://askubuntu.com/questions/445487/what-debian-version-are-the-different-ubuntu-versions-based-on","rel":["nofollow"]},"children":[{"type":"text","value":"https://askubuntu.com/questions/445487/what-debian-version-are-the-different-ubuntu-versions-based-on"}]}]}]},{"type":"element","tag":"code","props":{"code":"cat /etc/debian_version\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-196648"},"children":[{"type":"text","value":"cat"}]},{"type":"element","tag":"span","props":{"class":"ct-f0f697"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-77b117"},"children":[{"type":"text","value":"/etc/debian_version"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"unsupported-version"},"children":[{"type":"text","value":"Unsupported Version"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There's also some unsupported versions here"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/armbian/community","rel":["nofollow"]},"children":[{"type":"text","value":"https://github.com/armbian/community"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Armbian 23.05.0-trunk Lunar"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This uses Ubuntu lunar or bookworm based on the hardware\nFor the RPI4 this is Lunar or Ubuntu 23.04"}]},{"type":"element","tag":"h2","props":{"id":"enable-kernel-updates"},"children":[{"type":"text","value":"Enable Kernel Updates"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There is a menu option to switch kernels here"}]},{"type":"element","tag":"code","props":{"code":"armbian-config\n# Select System -> Defreeze\n# Select System -> Other\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-196648"},"children":[{"type":"text","value":"armbian-config\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-f6916e"},"children":[{"type":"text","value":"# Select System -> Defreeze\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-f6916e"},"children":[{"type":"text","value":"# Select System -> Other"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"However, selecting a different kernel here just seemed to delete the kernel image / make the system unbootable"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThe most recent kernel for supported is 6.1.11"}]},{"type":"element","tag":"h2","props":{"id":"overclocking"},"children":[{"type":"text","value":"Overclocking"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It looks like by default it's doing a bit of overlclocking"}]},{"type":"element","tag":"code","props":{"code":"over_voltage=2\narm_freq=1800\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"over_voltage=2\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"arm_freq=1800"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"building-image"},"children":[{"type":"text","value":"Building Image"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/armbian/build","rel":["nofollow"]},"children":[{"type":"text","value":"https://github.com/armbian/build"}]}]}]},{"type":"element","tag":"code","props":{"code":"apt install git\ngit clone --depth=1 --branch=main https://github.com/armbian/build\ncd build\n./compile.sh\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-196648"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-f0f697"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-77b117"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-f0f697"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-77b117"},"children":[{"type":"text","value":"git\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-196648"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"class":"ct-f0f697"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-77b117"},"children":[{"type":"text","value":"clone"}]},{"type":"element","tag":"span","props":{"class":"ct-f0f697"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d21d9"},"children":[{"type":"text","value":"--depth=1"}]},{"type":"element","tag":"span","props":{"class":"ct-f0f697"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d21d9"},"children":[{"type":"text","value":"--branch=main"}]},{"type":"element","tag":"span","props":{"class":"ct-f0f697"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-77b117"},"children":[{"type":"text","value":"https://github.com/armbian/build\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d21d9"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"class":"ct-f0f697"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-77b117"},"children":[{"type":"text","value":"build\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d21d9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-196648"},"children":[{"type":"text","value":"/compile.sh"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The free disk space check seems borked with a usb hard disk mounted"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-0d21d9{color:#0550AE}\n.ct-f6916e{color:#6E7781}\n.ct-77b117{color:#0A3069}\n.ct-f0f697{color:#24292F}\n.ct-196648{color:#953800}\n.dark .ct-196648{color:#FFA657}\n.dark .ct-f0f697{color:#C9D1D9}\n.dark .ct-77b117{color:#A5D6FF}\n.dark .ct-f6916e{color:#8B949E}\n.dark .ct-0d21d9{color:#79C0FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"supported-version","depth":2,"text":"Supported Version"},{"id":"unsupported-version","depth":2,"text":"Unsupported Version"},{"id":"enable-kernel-updates","depth":2,"text":"Enable Kernel Updates"},{"id":"overclocking","depth":2,"text":"Overclocking"},{"id":"building-image","depth":2,"text":"Building Image"}]}},"_type":"markdown","_id":"content:1.os:2.armbian:2.todo.md","_source":"content","_file":"1.os/2.armbian/2.todo.md","_extension":"md"},{"_path":"/os/kernel/_dir","_dir":"kernel","_draft":false,"_partial":true,"_locale":"","title":"Linux Kernel","_id":"content:1.os:3.kernel:_dir.yml","_type":"yaml","_source":"content","_file":"1.os/3.kernel/_dir.yml","_extension":"yml"},{"_path":"/os/kernel","_dir":"os","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Kernel","description":"For LinuxCNC we need a realtime kernel using preempt-rt.\nThis is because LinuxCNC is doing the motion planning and movement commands in the operating system and not a microcontroller.\nIt is able to use a mesa or FPGA board to help generate the steps / do some workload, but the majority of the work is done at the operating system level,","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"kernel"},"children":[{"type":"text","value":"Kernel"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For LinuxCNC we need a realtime kernel using preempt-rt."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThis is because LinuxCNC is doing the motion planning and movement commands in the operating system and not a microcontroller."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nIt is able to use a mesa or FPGA board to help generate the steps / do some workload, but the majority of the work is done at the operating system level,"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The way dietpi works is that it uses the version of kernel normally bundled with the distro it's using as a template."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nAt the time of writing this will likely be 6.1.x (aarch64) for a RPI3 / RPI4."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThis won't be a real-time kernel, which means we have to build our own."}]},{"type":"element","tag":"h2","props":{"id":"realtime-kernel"},"children":[{"type":"text","value":"Realtime Kernel"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There are two variants of realtime kernel for linux"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"RTAI for parallel port stepping machines."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Preempt_rt for Mesa/Pico based machines."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"RTAI I think is ether depreciated or a work in progress."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nPreempt_rt seems to be the one to aim for."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://forum.linuxcnc.org/9-installing-linuxcnc/36584-rtai-vs-preemt-rt","rel":["nofollow"]},"children":[{"type":"text","value":"https://forum.linuxcnc.org/9-installing-linuxcnc/36584-rtai-vs-preemt-rt"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Typically, the Preempt_rt patches can be located here"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://mirrors.edge.kernel.org/pub/linux/kernel/projects/rt/","rel":["nofollow"]},"children":[{"type":"text","value":"https://mirrors.edge.kernel.org/pub/linux/kernel/projects/rt/"}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"realtime-kernel","depth":2,"text":"Realtime Kernel"}]}},"_type":"markdown","_id":"content:1.os:3.kernel:0.index.md","_source":"content","_file":"1.os/3.kernel/0.index.md","_extension":"md"},{"_path":"/os/kernel/rpi-kernel","_dir":"kernel","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"RPi Kernel","description":"Details on building a realtime kernel for the Rpi.\nlinuxcnc seems to recommend the Rpi4 as a minimum","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"rpi-kernel"},"children":[{"type":"text","value":"RPi Kernel"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Details on building a realtime kernel for the Rpi."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nlinuxcnc seems to recommend the Rpi4 as a minimum"}]},{"type":"element","tag":"h2","props":{"id":"downloading-sources"},"children":[{"type":"text","value":"Downloading Sources"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/raspberrypi/linux","rel":["nofollow"]},"children":[{"type":"text","value":"https://github.com/raspberrypi/linux"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.raspberrypi.com/documentation/computers/linux_kernel.html","rel":["nofollow"]},"children":[{"type":"text","value":"https://www.raspberrypi.com/documentation/computers/linux_kernel.html"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Install some dependencies"}]},{"type":"element","tag":"code","props":{"code":"sudo apt install git bc bison flex libssl-dev make gcc raspberrypi-kernel-headers libc6-dev\nsudo apt install patch xz-utils libncurses-dev\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-a6d474"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"bc"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"bison"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"flex"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"libssl-dev"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"make"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"gcc"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"raspberrypi-kernel-headers"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"libc6-dev\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-a6d474"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"patch"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"xz-utils"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"libncurses-dev"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To download the sources without the full git repository (as this can take a long time)"}]},{"type":"element","tag":"code","props":{"code":"# Using kernel 6.3 as an example here\ncd /usr/src\n# For the latest master\nwget https://github.com/raspberrypi/linux/archive/refs/heads/rpi-6.3.y.tar.gz\n# For a specific version based on the commit hash (what I'm current;y using)\nwget https://github.com/raspberrypi/linux/archive/2d0a7ff52ebfe7bc1c08fd7e444b9ce3d34385bf.tar.gz -O rpi-6.3.y.tar.gz\n\n# Extract the files\ntar -xvf rpi-6.3.y.tar.gz\nmv linux-rpi-6.3.y linux-6.3.2-rt\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-7bb9b4"},"children":[{"type":"text","value":"# Using kernel 6.3 as an example here\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-96f36a"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"/usr/src\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-7bb9b4"},"children":[{"type":"text","value":"# For the latest master\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-a6d474"},"children":[{"type":"text","value":"wget"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"https://github.com/raspberrypi/linux/archive/refs/heads/rpi-6.3.y.tar.gz\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-7bb9b4"},"children":[{"type":"text","value":"# For a specific version based on the commit hash (what I'm current;y using)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-a6d474"},"children":[{"type":"text","value":"wget"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"https://github.com/raspberrypi/linux/archive/2d0a7ff52ebfe7bc1c08fd7e444b9ce3d34385bf.tar.gz"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-96f36a"},"children":[{"type":"text","value":"-O"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"rpi-6.3.y.tar.gz\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-7bb9b4"},"children":[{"type":"text","value":"# Extract the files\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-a6d474"},"children":[{"type":"text","value":"tar"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-96f36a"},"children":[{"type":"text","value":"-xvf"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"rpi-6.3.y.tar.gz\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-a6d474"},"children":[{"type":"text","value":"mv"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"linux-rpi-6.3.y"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"linux-6.3.2-rt"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"patch-sources"},"children":[{"type":"text","value":"Patch Sources"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To determine which version the sources are using"}]},{"type":"element","tag":"code","props":{"code":"head linux-6.3.2-rt/Makefile -n 4\n# Given I've specified the git hash above for a specific version, this should be 6.3.2\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-a6d474"},"children":[{"type":"text","value":"head"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"linux-6.3.2-rt/Makefile"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-96f36a"},"children":[{"type":"text","value":"-n"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-96f36a"},"children":[{"type":"text","value":"4\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-7bb9b4"},"children":[{"type":"text","value":"# Given I've specified the git hash above for a specific version, this should be 6.3.2"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Download and apply the patch file for the relevant kernel version."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://mirrors.edge.kernel.org/pub/linux/kernel/projects/rt/","rel":["nofollow"]},"children":[{"type":"text","value":"https://mirrors.edge.kernel.org/pub/linux/kernel/projects/rt/"}]}]}]},{"type":"element","tag":"code","props":{"code":"cd /usr/src/\nwget https://mirrors.edge.kernel.org/pub/linux/kernel/projects/rt/6.3/patch-6.3.3-rt15.patch.xz\ncd linux-6.3.2-rt\nxzcat ../patch-6.3.3-rt15.patch.xz | patch -p1\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-96f36a"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"/usr/src/\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-a6d474"},"children":[{"type":"text","value":"wget"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"https://mirrors.edge.kernel.org/pub/linux/kernel/projects/rt/"}]},{"type":"element","tag":"span","props":{"class":"ct-96f36a"},"children":[{"type":"text","value":"6.3"}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"/patch-6.3.3-rt15.patch.xz\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-96f36a"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"linux-6.3.2-rt\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-a6d474"},"children":[{"type":"text","value":"xzcat"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"../patch-6.3.3-rt15.patch.xz"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5c108d"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a6d474"},"children":[{"type":"text","value":"patch"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-96f36a"},"children":[{"type":"text","value":"-p1"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note for this specific patch, it may complain while trying to apply the last hunk."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThis is due to it already being applied in the kernel sources, so just answer the prompt with 'n'"}]},{"type":"element","tag":"h2","props":{"id":"configure-sources"},"children":[{"type":"text","value":"Configure Sources"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Next create a default configuration for the RPI4"}]},{"type":"element","tag":"code","props":{"code":"# 64bit Rpi4 / Rpi3\nmake bcm2711_defconfig\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-7bb9b4"},"children":[{"type":"text","value":"# 64bit Rpi4 / Rpi3\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-a6d474"},"children":[{"type":"text","value":"make"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"bcm2711_defconfig"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Next let's make some configuration changes."}]},{"type":"element","tag":"code","props":{"code":"make menuconfig\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-a6d474"},"children":[{"type":"text","value":"make"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"menuconfig"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The main ones to change are:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"General -> Preemption Model"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nswitch this to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Full Real-time"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"General Setup -> Local Version\nadd something to the end of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"CONFIG_LOCALVERSION"}]},{"type":"text","value":" to make it unique."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nSuch as "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-rt-linuxcnc1"}]}]}]},{"type":"element","tag":"h2","props":{"id":"build-install-kernel"},"children":[{"type":"text","value":"Build / Install kernel"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Next we're going to build the kernel sources."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nSomething to remember at this point is if you've already added "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"isolcpus=2,3"}]},{"type":"text","value":" to the /boot/cmdline.txt file."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThen it's going to take twice as long to compile due to two of the core's being unavailable for general use."}]},{"type":"element","tag":"code","props":{"code":"# Build the kernel - 64bit\nmake -j4 Image.gz modules dtbs\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-7bb9b4"},"children":[{"type":"text","value":"# Build the kernel - 64bit\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-a6d474"},"children":[{"type":"text","value":"make"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-96f36a"},"children":[{"type":"text","value":"-j4"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"Image.gz"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"modules"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"dtbs"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Next we're going to install the kernel modules"}]},{"type":"element","tag":"code","props":{"code":"# This typically copies the modules across to a directory such as /lib/modules/6.3.2-rt13-v8-rt-linuxcnc1\nmake modules_install\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-7bb9b4"},"children":[{"type":"text","value":"# This typically copies the modules across to a directory such as /lib/modules/6.3.2-rt13-v8-rt-linuxcnc1\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-a6d474"},"children":[{"type":"text","value":"make"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"modules_install"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Finally, we're going to install the kernel image and other boot related files.\nThe best way to do this is to use a separate directory so that we don't overwrite the default kernel."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nWe can then just switch back and forth between the default and the realtime kernel using a single config line under "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/boot/config.txt"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In this example we're using the directory "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/boot/rt-6.3/"}]}]},{"type":"element","tag":"code","props":{"code":"# Install the kernel image and boot files - 64bit\nmkdir -p /boot/rt-6.3/overlays/\ncp arch/arm64/boot/dts/broadcom/*.dtb /boot/rt-6.3/\ncp arch/arm64/boot/dts/overlays/*.dtb* /boot/rt-6.3/overlays/\ncp arch/arm64/boot/dts/overlays/README /boot/rt-6.3/overlays/\ncp arch/arm64/boot/Image.gz /boot/rt-6.3/kernel8.img\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-7bb9b4"},"children":[{"type":"text","value":"# Install the kernel image and boot files - 64bit\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-a6d474"},"children":[{"type":"text","value":"mkdir"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-96f36a"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"/boot/rt-"}]},{"type":"element","tag":"span","props":{"class":"ct-96f36a"},"children":[{"type":"text","value":"6.3"}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"/overlays/\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-a6d474"},"children":[{"type":"text","value":"cp"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"arch/arm64/boot/dts/broadcom/"}]},{"type":"element","tag":"span","props":{"class":"ct-96f36a"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":".dtb"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"/boot/rt-"}]},{"type":"element","tag":"span","props":{"class":"ct-96f36a"},"children":[{"type":"text","value":"6.3"}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"/\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-a6d474"},"children":[{"type":"text","value":"cp"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"arch/arm64/boot/dts/overlays/"}]},{"type":"element","tag":"span","props":{"class":"ct-96f36a"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":".dtb"}]},{"type":"element","tag":"span","props":{"class":"ct-96f36a"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"/boot/rt-"}]},{"type":"element","tag":"span","props":{"class":"ct-96f36a"},"children":[{"type":"text","value":"6.3"}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"/overlays/\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-a6d474"},"children":[{"type":"text","value":"cp"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"arch/arm64/boot/dts/overlays/README"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"/boot/rt-"}]},{"type":"element","tag":"span","props":{"class":"ct-96f36a"},"children":[{"type":"text","value":"6.3"}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"/overlays/\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-a6d474"},"children":[{"type":"text","value":"cp"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"arch/arm64/boot/Image.gz"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"/boot/rt-"}]},{"type":"element","tag":"span","props":{"class":"ct-96f36a"},"children":[{"type":"text","value":"6.3"}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"/kernel8.img"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"boot-config"},"children":[{"type":"text","value":"Boot Config"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Next edit the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/boot/config.txt"}]},{"type":"text","value":" file."}]},{"type":"element","tag":"code","props":{"code":"# Add this to the top of the file\nos_prefix=/rt-6.3/\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-7bb9b4"},"children":[{"type":"text","value":"# Add this to the top of the file\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":"os_prefix"}]},{"type":"element","tag":"span","props":{"class":"ct-5c108d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"/rt-"}]},{"type":"element","tag":"span","props":{"class":"ct-96f36a"},"children":[{"type":"text","value":"6.3"}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"/"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This should select the realtime kernel we're ve just installed into the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/boot/rt-6.3"}]},{"type":"text","value":" directory on the next reboot."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nIf you need to switch back to the default kernel, just comment out the line and reboot."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nTo reboot the machine "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/sbin/reboot"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nAfter a reboot, we can check the kernel version with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"uname -a"}]},{"type":"text","value":" to make sure it has RT in it's name"}]},{"type":"element","tag":"h2","props":{"id":"_32bit-64bit-kernel"},"children":[{"type":"text","value":"32bit / 64bit kernel"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For the RPI4 we have "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"kernel8.img"}]},{"type":"text","value":" for 64 bit and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"kernel7l.img"}]},{"type":"text","value":" for 32bit."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nIt's determined which one to use within config.txt via the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"arm_64bit"}]},{"type":"text","value":" setting."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThis currently defaults to 1 now for 64bit, unless specifically set to 0 for 32bit."}]},{"type":"element","tag":"code","props":{"code":"arm_64bit=1\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":"arm_64bit"}]},{"type":"element","tag":"span","props":{"class":"ct-5c108d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-96f36a"},"children":[{"type":"text","value":"1"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"reading-the-live-kernel-configuration"},"children":[{"type":"text","value":"Reading The Live Kernel Configuration"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you want to read the config from the running kernel"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n(what was used to compile the kernel)"}]},{"type":"element","tag":"code","props":{"code":"modprobe configs\nzcat /proc/config.gz > ./output\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-a6d474"},"children":[{"type":"text","value":"modprobe"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"configs\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-a6d474"},"children":[{"type":"text","value":"zcat"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"/proc/config.gz"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5c108d"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-90e474"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc185b"},"children":[{"type":"text","value":"./output"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-5c108d{color:#CF222E}\n.ct-96f36a{color:#0550AE}\n.ct-7bb9b4{color:#6E7781}\n.ct-dc185b{color:#0A3069}\n.ct-90e474{color:#24292F}\n.ct-a6d474{color:#953800}\n.dark .ct-a6d474{color:#FFA657}\n.dark .ct-90e474{color:#C9D1D9}\n.dark .ct-dc185b{color:#A5D6FF}\n.dark .ct-7bb9b4{color:#8B949E}\n.dark .ct-96f36a{color:#79C0FF}\n.dark .ct-5c108d{color:#FF7B72}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"downloading-sources","depth":2,"text":"Downloading Sources"},{"id":"patch-sources","depth":2,"text":"Patch Sources"},{"id":"configure-sources","depth":2,"text":"Configure Sources"},{"id":"build-install-kernel","depth":2,"text":"Build / Install kernel"},{"id":"boot-config","depth":2,"text":"Boot Config"},{"id":"_32bit-64bit-kernel","depth":2,"text":"32bit / 64bit kernel"},{"id":"reading-the-live-kernel-configuration","depth":2,"text":"Reading The Live Kernel Configuration"}]}},"_type":"markdown","_id":"content:1.os:3.kernel:1.rpi-kernel.md","_source":"content","_file":"1.os/3.kernel/1.rpi-kernel.md","_extension":"md"},{"_path":"/os/kernel/rpi3-usb","_dir":"kernel","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"RPI3 Fixes","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"rpi3-fixes"},"children":[{"type":"text","value":"RPI3 Fixes"}]},{"type":"element","tag":"h2","props":{"id":"usb-issues"},"children":[{"type":"text","value":"USB Issues"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"With the RPi3 it can have an issue with it's USB Controller when used in realtime."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://forums.raspberrypi.com/viewtopic.php?t=159170","rel":["nofollow"]},"children":[{"type":"text","value":"https://forums.raspberrypi.com/viewtopic.php?t=159170"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.osadl.org/Single-View.111+M5c03315dc57.0.html","rel":["nofollow"]},"children":[{"type":"text","value":"https://www.osadl.org/Single-View.111+M5c03315dc57.0.html"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.osadl.org/monitoring/patches/rbs3s/usb-dwc_otg-fix-system-lockup-when-interrupts-are-threaded.patch.html","rel":["nofollow"]},"children":[{"type":"text","value":"https://www.osadl.org/monitoring/patches/rbs3s/usb-dwc_otg-fix-system-lockup-when-interrupts-are-threaded.patch.html"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"One workaround is to add the following to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/boot/cmdline.txt"}]}]},{"type":"element","tag":"code","props":{"code":"dwc_otg.fiq_enable=0 dwc_otg.fiq_fsm_enable=0\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-092279"},"children":[{"type":"text","value":"dwc_otg.fiq_enable=0"}]},{"type":"element","tag":"span","props":{"class":"ct-37d3d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6998b4"},"children":[{"type":"text","value":"dwc_otg.fiq_fsm_enable="}]},{"type":"element","tag":"span","props":{"class":"ct-358b44"},"children":[{"type":"text","value":"0"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There was also another suggestion to also try "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"dwc_otg.nak_holdoff=0"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nAfter rebooting the state can be checked with:"}]},{"type":"element","tag":"code","props":{"code":"dmesg | grep otg\n# Look for \"dwc_otg: FIQ disabled\"\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-092279"},"children":[{"type":"text","value":"dmesg"}]},{"type":"element","tag":"span","props":{"class":"ct-37d3d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-190d64"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-37d3d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-092279"},"children":[{"type":"text","value":"grep"}]},{"type":"element","tag":"span","props":{"class":"ct-37d3d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6998b4"},"children":[{"type":"text","value":"otg\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-6e2783"},"children":[{"type":"text","value":"# Look for \"dwc_otg: FIQ disabled\""}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-6e2783{color:#6E7781}\n.ct-190d64{color:#CF222E}\n.ct-358b44{color:#0550AE}\n.ct-6998b4{color:#0A3069}\n.ct-37d3d0{color:#24292F}\n.ct-092279{color:#953800}\n.dark .ct-092279{color:#FFA657}\n.dark .ct-37d3d0{color:#C9D1D9}\n.dark .ct-6998b4{color:#A5D6FF}\n.dark .ct-358b44{color:#79C0FF}\n.dark .ct-190d64{color:#FF7B72}\n.dark .ct-6e2783{color:#8B949E}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"usb-issues","depth":2,"text":"USB Issues"}]}},"_type":"markdown","_id":"content:1.os:3.kernel:2.rpi3-usb.md","_source":"content","_file":"1.os/3.kernel/2.rpi3-usb.md","_extension":"md"},{"_path":"/os/kernel/other-devs","_dir":"kernel","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Other Devices","description":"There are many alternatives to the RPI now, especially since getting hold of one has become quite difficult recently.\nMost of these alternatives (although not all) seems to be based around the Rockchip RK3588S chipset.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"other-devices"},"children":[{"type":"text","value":"Other Devices"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There are many alternatives to the RPI now, especially since getting hold of one has become quite difficult recently."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nMost of these alternatives (although not all) seems to be based around the Rockchip RK3588S chipset."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It does look as if the 6.3 Kernel has incorporated support for many alternatives recently including the Rockwell chipset."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.phoronix.com/news/Linux-6.3-Arm-SoC-Updates","rel":["nofollow"]},"children":[{"type":"text","value":"https://www.phoronix.com/news/Linux-6.3-Arm-SoC-Updates"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For alternative devices Armbian may also be worth investigating as it looks as if they have custom patches setup for different devices. However, just building the kernel on it's own isn't easy without building all of Armbian, unless the patches could just be extracted out and run against 6.3"}]},{"type":"element","tag":"h2","props":{"id":"orange-pi-5"},"children":[{"type":"text","value":"Orange Pi 5"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The Orange Pi 5 uses the Rockchip RK3588S"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nFor the official sources 5.4.65 seems to be the latest version available, although 6.3 may be a workaround to that now."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/orangepi-xunlong/linux-orangepi","rel":["nofollow"]},"children":[{"type":"text","value":"https://github.com/orangepi-xunlong/linux-orangepi"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.youtube.com/watch?v=CxD_0q8tAdc","rel":["nofollow"]},"children":[{"type":"text","value":"https://www.youtube.com/watch?v=CxD_0q8tAdc"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Armbian Links"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/armbian/build/blob/main/config/boards/orangepi5.conf","rel":["nofollow"]},"children":[{"type":"text","value":"https://github.com/armbian/build/blob/main/config/boards/orangepi5.conf"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/armbian/build/blob/main/config/kernel/linux-rockchip64-edge.config","rel":["nofollow"]},"children":[{"type":"text","value":"https://github.com/armbian/build/blob/main/config/kernel/linux-rockchip64-edge.config"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/armbian/build/tree/main/patch/kernel/archive/rockchip64-6.1","rel":["nofollow"]},"children":[{"type":"text","value":"https://github.com/armbian/build/tree/main/patch/kernel/archive/rockchip64-6.1"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The Orange PI5 itself doesn't have inbuilt WIFI, although it does have a slot for a wifi card / SSD Disk."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nI'm not sure how much device support is incorporated into the latest kernel."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nSome work may be required to document and figure out all the configuration items to be used."}]},{"type":"element","tag":"h2","props":{"id":"odroid"},"children":[{"type":"text","value":"ODroid"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There's some suggestion here that using the ODroid works ok for LinuxCNC"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://forum.linuxcnc.org/18-computer/48113-odroid-as-raplacement-for-raspberry-pi?start=0","rel":["nofollow"]},"children":[{"type":"text","value":"https://forum.linuxcnc.org/18-computer/48113-odroid-as-raplacement-for-raspberry-pi?start=0"}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"orange-pi-5","depth":2,"text":"Orange Pi 5"},{"id":"odroid","depth":2,"text":"ODroid"}]}},"_type":"markdown","_id":"content:1.os:3.kernel:3.other-devs.md","_source":"content","_file":"1.os/3.kernel/3.other-devs.md","_extension":"md"},{"_path":"/os/optimise/_dir","_dir":"optimise","_draft":false,"_partial":true,"_locale":"","title":"Optimisations","_id":"content:1.os:4.optimise:_dir.yml","_type":"yaml","_source":"content","_file":"1.os/4.optimise/_dir.yml","_extension":"yml"},{"_path":"/os/optimise/kernelcfg","_dir":"optimise","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Kernel Config","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"kernel-config"},"children":[{"type":"text","value":"Kernel Config"}]},{"type":"element","tag":"h2","props":{"id":"realtime-pre-emption-model"},"children":[{"type":"text","value":"Realtime Pre-emption model"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This is the main switch to enable a realtime kernel when using the realtime patches"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"CONFIG_PREEMPT_RT"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nGeneral -> Preemption Model -> Select full real time"}]}]},{"type":"element","tag":"h2","props":{"id":"debian-realtime"},"children":[{"type":"text","value":"Debian Realtime"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Looking at the Debian realtime options the below appears to be set for the realtime kernel"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://salsa.debian.org/kernel-team/linux/-/blob/master/debian/config/arm64/rt/config","rel":["nofollow"]},"children":[{"type":"text","value":"https://salsa.debian.org/kernel-team/linux/-/blob/master/debian/config/arm64/rt/config"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://salsa.debian.org/kernel-team/linux/-/blob/master/debian/config/featureset-rt/config","rel":["nofollow"]},"children":[{"type":"text","value":"https://salsa.debian.org/kernel-team/linux/-/blob/master/debian/config/featureset-rt/config"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"KVM appears to be disabled, it doesn't seem to make a difference for the newer kernels."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nI think originally it was required for realtime to work on some platforms."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nBy having it disabled I think HAVE_POSIX_CPU_TIMERS_TASK_WORK is then enabled which then allows for ARCH_SUPPORTS_RT on some platforms, although I don't think it's mandatory on aarch64."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"CONFIG_KVM disabled"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The enabling of the tracer options should in theory allow for gathering information as to where latency issues might be present so might be useful at a later point."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"CONFIG_RCU_EXPERT enabled"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"CONFIG_SCHED_TRACER already enabled"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"CONFIG_HWLAT_TRACER enabled"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"CONFIG_OSNOISE_TRACER enabled"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"CONFIG_TIMERLAT_TRACER enabled"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This doesn't have an impact on latency but could be interesting for latency tests possibly."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThis is something I've enabled"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"CONFIG_HIST_TRIGGERS"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"realtime-pre-emption-model","depth":2,"text":"Realtime Pre-emption model"},{"id":"debian-realtime","depth":2,"text":"Debian Realtime"}]}},"_type":"markdown","_id":"content:1.os:4.optimise:1.kernelcfg.md","_source":"content","_file":"1.os/4.optimise/1.kernelcfg.md","_extension":"md"},{"_path":"/os/optimise/bootcmd","_dir":"optimise","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Boot Options","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"boot-options"},"children":[{"type":"text","value":"Boot Options"}]},{"type":"element","tag":"h2","props":{"id":"standard-options"},"children":[{"type":"text","value":"Standard Options"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The following needs to be added to the end of /boot/cmdline.txt"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"processor.max_cstate=1"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThis limits the CPU to a C1 state (prevents it from sleeping)"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"a","props":{"href":"https://gist.github.com/Brainiarc7/8dfd6bb189b8e6769bb5817421aec6d1","rel":["nofollow"]},"children":[{"type":"text","value":"https://gist.github.com/Brainiarc7/8dfd6bb189b8e6769bb5817421aec6d1"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"isolcpus=2,3"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThis prevents the linux kernel from scheduling normal tasks to the last two processors."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The userspace part of linuxcnc uses a special realtime API that makes use of the processor cores that have been isolated."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nIn this case we have a 4 core system, we leave the first two for the operating system and then use the last two for linuxcnc"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"fsck.repair=yes"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nIf fsck prompts to repair something, provide yes as the answer"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThis helps with making sure the operating system doesn't stall on bootup."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nIt just tries to fix the filesystem automatically if there's a problem without asking."}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"standard-options","depth":2,"text":"Standard Options"}]}},"_type":"markdown","_id":"content:1.os:4.optimise:2.bootcmd.md","_source":"content","_file":"1.os/4.optimise/2.bootcmd.md","_extension":"md"},{"_path":"/os/optimise/usercfg","_dir":"optimise","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Userspace Config","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"userspace-config"},"children":[{"type":"text","value":"Userspace Config"}]},{"type":"element","tag":"h2","props":{"id":"video-acceleration"},"children":[{"type":"text","value":"Video Acceleration"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This one is very important and has the biggest impact by far on a RPI4."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThis enables the video acceleration for the display."}]},{"type":"element","tag":"code","props":{"code":"# Within /boot/config.txt\ndtoverlay=vc4-fkms-v3d\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-212c76"},"children":[{"type":"text","value":"# Within /boot/config.txt\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-351ab9"},"children":[{"type":"text","value":"dtoverlay"}]},{"type":"element","tag":"span","props":{"class":"ct-718bc4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-84c8a5"},"children":[{"type":"text","value":"vc4-fkms-v3d"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"turbo-boost"},"children":[{"type":"text","value":"Turbo Boost"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It's possible to get some additional performance with some overlocking."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nSo far I've mostly avoided that to avoid over heating the RPI, although I have enabled."}]},{"type":"element","tag":"code","props":{"code":"# Within /boot/config.txt\nforce_turbo=1\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-212c76"},"children":[{"type":"text","value":"# Within /boot/config.txt\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-351ab9"},"children":[{"type":"text","value":"force_turbo"}]},{"type":"element","tag":"span","props":{"class":"ct-718bc4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-f9b006"},"children":[{"type":"text","value":"1"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"disable-audio"},"children":[{"type":"text","value":"Disable Audio"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Make sure to disable audio within /boot/config.txt"}]},{"type":"element","tag":"code","props":{"code":"# Within /boot/config.txt\ndtparam=audio=off\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-212c76"},"children":[{"type":"text","value":"# Within /boot/config.txt\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-351ab9"},"children":[{"type":"text","value":"dtparam"}]},{"type":"element","tag":"span","props":{"class":"ct-718bc4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-84c8a5"},"children":[{"type":"text","value":"audio=off"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Next launch "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"dietpi-config"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nUnder Audio Options select the option to disable the Audio completely"}]},{"type":"element","tag":"h2","props":{"id":"display-overscan"},"children":[{"type":"text","value":"Display Overscan"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I don't believe this has any impact on latency."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nBut if you're display has a black border, then setting this to 1 can get rid of that."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nIf the screen is flickering try setting it to 0"}]},{"type":"element","tag":"code","props":{"code":"# Within /boot/config.txt\ndisable_overscan=1\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-212c76"},"children":[{"type":"text","value":"# Within /boot/config.txt\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-351ab9"},"children":[{"type":"text","value":"disable_overscan"}]},{"type":"element","tag":"span","props":{"class":"ct-718bc4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-f9b006"},"children":[{"type":"text","value":"1"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"scaling-govenor"},"children":[{"type":"text","value":"Scaling Govenor"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Using "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"dietpi-config"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Go to Performance Options"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Select CPU Govenor"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Select Performance"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The default is "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"schedutil"}]},{"type":"text","value":" the current setting can also be seen via"}]},{"type":"element","tag":"code","props":{"code":"cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-50a9bc"},"children":[{"type":"text","value":"cat"}]},{"type":"element","tag":"span","props":{"class":"ct-351ab9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-84c8a5"},"children":[{"type":"text","value":"/sys/devices/system/cpu/cpu0/cpufreq/scaling_governor"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"disable-swap"},"children":[{"type":"text","value":"Disable Swap"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"One thing to make sure of is to make sure any swap partitions are disabled"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nTo make this persistent comment out the swap line within "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/etc/fstab"}]}]},{"type":"element","tag":"code","props":{"code":"# List the swap partitions that are setup\ncat /proc/swaps\n\n# Switch off all swaps\nswapoff -a\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-212c76"},"children":[{"type":"text","value":"# List the swap partitions that are setup\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-50a9bc"},"children":[{"type":"text","value":"cat"}]},{"type":"element","tag":"span","props":{"class":"ct-351ab9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-84c8a5"},"children":[{"type":"text","value":"/proc/swaps\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-212c76"},"children":[{"type":"text","value":"# Switch off all swaps\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-50a9bc"},"children":[{"type":"text","value":"swapoff"}]},{"type":"element","tag":"span","props":{"class":"ct-351ab9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f9b006"},"children":[{"type":"text","value":"-a"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-50a9bc{color:#953800}\n.ct-f9b006{color:#0550AE}\n.ct-84c8a5{color:#0A3069}\n.ct-718bc4{color:#CF222E}\n.ct-351ab9{color:#24292F}\n.ct-212c76{color:#6E7781}\n.dark .ct-212c76{color:#8B949E}\n.dark .ct-351ab9{color:#C9D1D9}\n.dark .ct-718bc4{color:#FF7B72}\n.dark .ct-84c8a5{color:#A5D6FF}\n.dark .ct-f9b006{color:#79C0FF}\n.dark .ct-50a9bc{color:#FFA657}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"video-acceleration","depth":2,"text":"Video Acceleration"},{"id":"turbo-boost","depth":2,"text":"Turbo Boost"},{"id":"disable-audio","depth":2,"text":"Disable Audio"},{"id":"display-overscan","depth":2,"text":"Display Overscan"},{"id":"scaling-govenor","depth":2,"text":"Scaling Govenor"},{"id":"disable-swap","depth":2,"text":"Disable Swap"}]}},"_type":"markdown","_id":"content:1.os:4.optimise:3.usercfg.md","_source":"content","_file":"1.os/4.optimise/3.usercfg.md","_extension":"md"},{"_path":"/os/optimise/exclusions/_dir","_dir":"exclusions","_draft":false,"_partial":true,"_locale":"","title":"Exclusions","_id":"content:1.os:4.optimise:5.exclusions:_dir.yml","_type":"yaml","_source":"content","_file":"1.os/4.optimise/5.exclusions/_dir.yml","_extension":"yml"},{"_path":"/os/optimise/exclusions/kernelcfg","_dir":"exclusions","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Kernel Config","description":"Below are kernel configuration settings I've tried but didn't seem to have much affect.\nI suspect some of them may be geared more towards different platforms such as intel.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"kernel-config"},"children":[{"type":"text","value":"Kernel Config"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Below are kernel configuration settings I've tried but didn't seem to have much affect."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nI suspect some of them may be geared more towards different platforms such as intel."}]},{"type":"element","tag":"h2","props":{"id":"sceduling"},"children":[{"type":"text","value":"Sceduling"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://forum.linuxcnc.org/18-computer/47825-latency-test","rel":["nofollow"]},"children":[{"type":"text","value":"https://forum.linuxcnc.org/18-computer/47825-latency-test"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There was some suggestion of adding these in."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nAlthough I think the differences are negligible / difficult to detect."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nI'm avoiding these settings for now."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"CONFIG_SCHED_SMT"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"CONFIG_SCHED_CORE"}]}]},{"type":"element","tag":"h2","props":{"id":"cb-hz-settings"},"children":[{"type":"text","value":"CB / HZ Settings"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"CONFIG_NO_HZ_FULL"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"CONFIG_RCU_NOCB_CPU"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Both of these options allow us to use the options at the boot command line of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nohz_full"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"rcu_nocbs"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nI couldn't see any improvement with these settings if anything possibly making things worse."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nI'm avoiding these settings for now, I suspect they may work better on a full intel PC."}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"sceduling","depth":2,"text":"Sceduling"},{"id":"cb-hz-settings","depth":2,"text":"CB / HZ Settings"}]}},"_type":"markdown","_id":"content:1.os:4.optimise:5.exclusions:1.kernelcfg.md","_source":"content","_file":"1.os/4.optimise/5.exclusions/1.kernelcfg.md","_extension":"md"},{"_path":"/os/optimise/exclusions/bootcmd","_dir":"exclusions","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Boot Options","description":"Below are kernel boot settings I've tried but didn't seem to have much affect.\nI suspect some of them may be geared more towards different platforms such as intel.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"boot-options"},"children":[{"type":"text","value":"Boot Options"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Below are kernel boot settings I've tried but didn't seem to have much affect."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nI suspect some of them may be geared more towards different platforms such as intel."}]},{"type":"element","tag":"h2","props":{"id":"no-difference-makes-things-worse"},"children":[{"type":"text","value":"No Difference / Makes things Worse"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"These are some of the settings that seem to be suggested but didn't seem to make any observable difference."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nAt least for a RPI4."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"idle=poll"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"audit=0"}]},{"type":"text","value":" Disable audit messages in dmesg"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"mitigations=off"}]},{"type":"text","value":" This disables certain security mitigations added to the kernel"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"plymouth.ignore-serial-consoles"}]},{"type":"text","value":" Don't issue a bootsplash on any serial console"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"rcu_nocbs=2,3"}]},{"type":"text","value":" no difference"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nohz_full=2,3"}]},{"type":"text","value":" makes things worse I think"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This option was used on the original linuxcnc image\nBut it's not related to latency, instead it was to fix a USB issue with the older 5.4 kernels at the time"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"total_mem=3072"}]}]}]},{"type":"element","tag":"h2","props":{"id":"scheduler"},"children":[{"type":"text","value":"Scheduler"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Historically one option to set would have been "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"elevator=deadline"}]},{"type":"text","value":"."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nHowever, this is now depreciated in more recent kernels."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThe kernel will now automatically set a scheduler based on each device."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nI suspect this is a setting we can leave alone for the newer kernels."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To see which ones are available for the sda device for example"}]},{"type":"element","tag":"code","props":{"code":"cat /sys/block/sda/queue/scheduler\n# Typically reports back\n# none [mq-deadline] kyber bfq\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-1be293"},"children":[{"type":"text","value":"cat"}]},{"type":"element","tag":"span","props":{"class":"ct-e977e3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-77a935"},"children":[{"type":"text","value":"/sys/block/sda/queue/scheduler\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-05fae5"},"children":[{"type":"text","value":"# Typically reports back\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-05fae5"},"children":[{"type":"text","value":"# none [mq-deadline] kyber bfq"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-05fae5{color:#6E7781}\n.ct-77a935{color:#0A3069}\n.ct-e977e3{color:#24292F}\n.ct-1be293{color:#953800}\n.dark .ct-1be293{color:#FFA657}\n.dark .ct-e977e3{color:#C9D1D9}\n.dark .ct-77a935{color:#A5D6FF}\n.dark .ct-05fae5{color:#8B949E}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"no-difference-makes-things-worse","depth":2,"text":"No Difference / Makes things Worse"},{"id":"scheduler","depth":2,"text":"Scheduler"}]}},"_type":"markdown","_id":"content:1.os:4.optimise:5.exclusions:2.bootcmd.md","_source":"content","_file":"1.os/4.optimise/5.exclusions/2.bootcmd.md","_extension":"md"},{"_path":"/os/optimise/exclusions/startupscript","_dir":"exclusions","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Startup Script","description":"I'm not sure if the below makes any difference so may be worth further investigation.\nThis includes IRQ Balance and tuna to move things away from the isolated processors that are to be used by linuxcnc.\nIn this case for a Pi4 CPU's 2 and 3.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"startup-script"},"children":[{"type":"text","value":"Startup Script"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I'm not sure if the below makes any difference so may be worth further investigation."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThis includes IRQ Balance and tuna to move things away from the isolated processors that are to be used by linuxcnc."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nIn this case for a Pi4 CPU's 2 and 3."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://rigtorp.se/low-latency-guide/","rel":["nofollow"]},"children":[{"type":"text","value":"https://rigtorp.se/low-latency-guide/"}]}]}]},{"type":"element","tag":"h2","props":{"id":"installing-tools"},"children":[{"type":"text","value":"Installing Tools"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"First to install the tools we need"}]},{"type":"element","tag":"code","props":{"code":"apt install tuna irqbalance\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-14dcb0"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33acc7"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33acc7"},"children":[{"type":"text","value":"tuna"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33acc7"},"children":[{"type":"text","value":"irqbalance"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"startup-script-1"},"children":[{"type":"text","value":"Startup Script"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Create a new file "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/var/lib/dietpi/postboot.d/cpu.opt.sh"}]}]},{"type":"element","tag":"code","props":{"code":"#!/bin/sh\n\n# To isolate cores specified in isolcpus using irqbalance\nirqbalance --foreground --oneshot\n\n# Use tuna move all kernel threads away from cores 2-3\ntuna --cpus=2-3 --isolate\n\n# kernel workqueues needs to be moved away from isolated cores. To move all work queues to core 0 (cpumask 0x1):\nfind /sys/devices/virtual/workqueue -name cpumask  -exec sh -c 'echo 1 > {}' ';'\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-75309f"},"children":[{"type":"text","value":"#!/bin/sh\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-75309f"},"children":[{"type":"text","value":"# To isolate cores specified in isolcpus using irqbalance\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-14dcb0"},"children":[{"type":"text","value":"irqbalance"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6259b0"},"children":[{"type":"text","value":"--foreground"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6259b0"},"children":[{"type":"text","value":"--oneshot\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-75309f"},"children":[{"type":"text","value":"# Use tuna move all kernel threads away from cores 2-3\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-14dcb0"},"children":[{"type":"text","value":"tuna"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6259b0"},"children":[{"type":"text","value":"--cpus=2-3"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6259b0"},"children":[{"type":"text","value":"--isolate\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-75309f"},"children":[{"type":"text","value":"# kernel workqueues needs to be moved away from isolated cores. To move all work queues to core 0 (cpumask 0x1):\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-14dcb0"},"children":[{"type":"text","value":"find"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33acc7"},"children":[{"type":"text","value":"/sys/devices/virtual/workqueue"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6259b0"},"children":[{"type":"text","value":"-name"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33acc7"},"children":[{"type":"text","value":"cpumask"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-6259b0"},"children":[{"type":"text","value":"-exec"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33acc7"},"children":[{"type":"text","value":"sh"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6259b0"},"children":[{"type":"text","value":"-c"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33acc7"},"children":[{"type":"text","value":"'echo 1 > {}'"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33acc7"},"children":[{"type":"text","value":"';'"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Make the file executable"}]},{"type":"element","tag":"code","props":{"code":"chmod +x /var/lib/dietpi/postboot.d/cpu.opt.sh\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-14dcb0"},"children":[{"type":"text","value":"chmod"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33acc7"},"children":[{"type":"text","value":"+x"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33acc7"},"children":[{"type":"text","value":"/var/lib/dietpi/postboot.d/cpu.opt.sh"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"reporting-on-status"},"children":[{"type":"text","value":"Reporting on Status"}]},{"type":"element","tag":"h3","props":{"id":"irq-balance"},"children":[{"type":"text","value":"IRQ Balance"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For irqbalance we can check that it's done it's job using the below commands"}]},{"type":"element","tag":"code","props":{"code":"# List CPU affinity for all IRQs\nfind /proc/irq/ -name smp_affinity_list -print -exec cat '{}' ';'\n\n# verify that isolated cores are not receiving interrupts by monitoring /proc/interrupts\nwatch cat /proc/interrupts\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-75309f"},"children":[{"type":"text","value":"# List CPU affinity for all IRQs\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-14dcb0"},"children":[{"type":"text","value":"find"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33acc7"},"children":[{"type":"text","value":"/proc/irq/"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6259b0"},"children":[{"type":"text","value":"-name"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33acc7"},"children":[{"type":"text","value":"smp_affinity_list"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6259b0"},"children":[{"type":"text","value":"-print"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6259b0"},"children":[{"type":"text","value":"-exec"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33acc7"},"children":[{"type":"text","value":"cat"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33acc7"},"children":[{"type":"text","value":"'{}'"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33acc7"},"children":[{"type":"text","value":"';'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-75309f"},"children":[{"type":"text","value":"# verify that isolated cores are not receiving interrupts by monitoring /proc/interrupts\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-14dcb0"},"children":[{"type":"text","value":"watch"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33acc7"},"children":[{"type":"text","value":"cat"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33acc7"},"children":[{"type":"text","value":"/proc/interrupts"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"tuna"},"children":[{"type":"text","value":"Tuna"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To get some feedback from the tuna setup"}]},{"type":"element","tag":"code","props":{"code":"# Use the tuna command to show CPU affinities for all threads\ntuna -P\n\n# List current workqueue affinities:\nfind /sys/devices/virtual/workqueue -name cpumask -print -exec cat '{}' ';'\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-75309f"},"children":[{"type":"text","value":"# Use the tuna command to show CPU affinities for all threads\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-14dcb0"},"children":[{"type":"text","value":"tuna"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6259b0"},"children":[{"type":"text","value":"-P\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-75309f"},"children":[{"type":"text","value":"# List current workqueue affinities:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-14dcb0"},"children":[{"type":"text","value":"find"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33acc7"},"children":[{"type":"text","value":"/sys/devices/virtual/workqueue"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6259b0"},"children":[{"type":"text","value":"-name"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33acc7"},"children":[{"type":"text","value":"cpumask"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6259b0"},"children":[{"type":"text","value":"-print"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6259b0"},"children":[{"type":"text","value":"-exec"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33acc7"},"children":[{"type":"text","value":"cat"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33acc7"},"children":[{"type":"text","value":"'{}'"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33acc7"},"children":[{"type":"text","value":"';'"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"perf"},"children":[{"type":"text","value":"Perf"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We can use perf to check the status as well"}]},{"type":"element","tag":"code","props":{"code":"# Install linux perf\napt install linux-perf\n\n# Verify if cores were successfully isolated by checking how many thread context switches are occurring per core\n# The isolated cores should show a very low context switch count.\nperf stat -e 'sched:sched_switch' -a -A --timeout 10000\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-75309f"},"children":[{"type":"text","value":"# Install linux perf\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-14dcb0"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33acc7"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33acc7"},"children":[{"type":"text","value":"linux-perf\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-75309f"},"children":[{"type":"text","value":"# Verify if cores were successfully isolated by checking how many thread context switches are occurring per core\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-75309f"},"children":[{"type":"text","value":"# The isolated cores should show a very low context switch count.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-14dcb0"},"children":[{"type":"text","value":"perf"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33acc7"},"children":[{"type":"text","value":"stat"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6259b0"},"children":[{"type":"text","value":"-e"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33acc7"},"children":[{"type":"text","value":"'sched:sched_switch'"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6259b0"},"children":[{"type":"text","value":"-a"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6259b0"},"children":[{"type":"text","value":"-A"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6259b0"},"children":[{"type":"text","value":"--timeout"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0fb5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6259b0"},"children":[{"type":"text","value":"10000"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-6259b0{color:#0550AE}\n.ct-75309f{color:#6E7781}\n.ct-33acc7{color:#0A3069}\n.ct-eb0fb5{color:#24292F}\n.ct-14dcb0{color:#953800}\n.dark .ct-14dcb0{color:#FFA657}\n.dark .ct-eb0fb5{color:#C9D1D9}\n.dark .ct-33acc7{color:#A5D6FF}\n.dark .ct-75309f{color:#8B949E}\n.dark .ct-6259b0{color:#79C0FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"installing-tools","depth":2,"text":"Installing Tools"},{"id":"startup-script-1","depth":2,"text":"Startup Script"},{"id":"reporting-on-status","depth":2,"text":"Reporting on Status","children":[{"id":"irq-balance","depth":3,"text":"IRQ Balance"},{"id":"tuna","depth":3,"text":"Tuna"},{"id":"perf","depth":3,"text":"Perf"}]}]}},"_type":"markdown","_id":"content:1.os:4.optimise:5.exclusions:3.startupscript.md","_source":"content","_file":"1.os/4.optimise/5.exclusions/3.startupscript.md","_extension":"md"},{"_path":"/os/benchmarking/_dir","_dir":"benchmarking","_draft":false,"_partial":true,"_locale":"","title":"Benchmarking","_id":"content:1.os:5.benchmarking:_dir.yml","_type":"yaml","_source":"content","_file":"1.os/5.benchmarking/_dir.yml","_extension":"yml"},{"_path":"/os/benchmarking/linuxcnc","_dir":"benchmarking","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"LinuxCNC","description":"In order to benchmark the current latency we can use some of the tools bundled with linuxcnc","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"linuxcnc-benchmarking"},"children":[{"type":"text","value":"LinuxCNC Benchmarking"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In order to benchmark the current latency we can use some of the tools bundled with linuxcnc"}]},{"type":"element","tag":"h2","props":{"id":"latency-test"},"children":[{"type":"text","value":"Latency Test"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The first method is to just run latency-test and make a note of the maximum jitter value"}]},{"type":"element","tag":"code","props":{"code":"latency-test\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-e367f5"},"children":[{"type":"text","value":"latency-"}]},{"type":"element","tag":"span","props":{"class":"ct-6ae13d"},"children":[{"type":"text","value":"test"}]}]}]}]}]},{"type":"element","tag":"card","props":{},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Jitter"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"nuxt-img","props":{"src":"/os/benchmarking/benchmark2.png","width":"300"},"children":[]}]}]},{"type":"element","tag":"h2","props":{"id":"latency-histogram"},"children":[{"type":"text","value":"Latency Histogram"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"One method is to run a latency histogram."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThere's a couple of buttons here for launching glxgears and taking a screenshot."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nTry opening around 5 x glxgears, then running the graph for a while."}]},{"type":"element","tag":"code","props":{"code":"latency-histogram --nobase --sbinsize 1000 --show\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-e367f5"},"children":[{"type":"text","value":"latency-histogram"}]},{"type":"element","tag":"span","props":{"class":"ct-1255a5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6ae13d"},"children":[{"type":"text","value":"--nobase"}]},{"type":"element","tag":"span","props":{"class":"ct-1255a5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6ae13d"},"children":[{"type":"text","value":"--sbinsize"}]},{"type":"element","tag":"span","props":{"class":"ct-1255a5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6ae13d"},"children":[{"type":"text","value":"1000"}]},{"type":"element","tag":"span","props":{"class":"ct-1255a5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6ae13d"},"children":[{"type":"text","value":"--show"}]}]}]}]}]},{"type":"element","tag":"card","props":{},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"With 5x glxgears."}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"nuxt-img","props":{"src":"/os/benchmarking/benchmark1.png","width":"300"},"children":[]}]}]},{"type":"element","tag":"h2","props":{"id":"script-for-automated-testing"},"children":[{"type":"text","value":"Script for Automated Testing"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://forum.linuxcnc.org/18-computer/39370-script-for-automated-testing-of-computer-latency","rel":["nofollow"]},"children":[{"type":"text","value":"https://forum.linuxcnc.org/18-computer/39370-script-for-automated-testing-of-computer-latency"}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-1255a5{color:#24292F}\n.ct-6ae13d{color:#0550AE}\n.ct-e367f5{color:#953800}\n.dark .ct-e367f5{color:#FFA657}\n.dark .ct-6ae13d{color:#79C0FF}\n.dark .ct-1255a5{color:#C9D1D9}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"latency-test","depth":2,"text":"Latency Test"},{"id":"latency-histogram","depth":2,"text":"Latency Histogram"},{"id":"script-for-automated-testing","depth":2,"text":"Script for Automated Testing"}]}},"_type":"markdown","_id":"content:1.os:5.benchmarking:1.linuxcnc.md","_source":"content","_file":"1.os/5.benchmarking/1.linuxcnc.md","_extension":"md"},{"_path":"/os/benchmarking/other","_dir":"benchmarking","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Other Tools","description":"There are some other forms of benchmarking which I've not got around to testing yet.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"other-forms-of-benchmarking"},"children":[{"type":"text","value":"Other Forms of Benchmarking"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There are some other forms of benchmarking which I've not got around to testing yet."}]},{"type":"element","tag":"h2","props":{"id":"stress-testing"},"children":[{"type":"text","value":"Stress Testing"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"There's rt-tests which contains cyclictest"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"a","props":{"href":"https://wiki.linuxfoundation.org/realtime/documentation/howto/tools/rt-tests","rel":["nofollow"]},"children":[{"type":"text","value":"https://wiki.linuxfoundation.org/realtime/documentation/howto/tools/rt-tests"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"There's also stress-ng / stress"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"a","props":{"href":"https://onlinelibrary.wiley.com/doi/full/10.1002/eng2.12114","rel":["nofollow"]},"children":[{"type":"text","value":"https://onlinelibrary.wiley.com/doi/full/10.1002/eng2.12114"}]}]}]},{"type":"element","tag":"code","props":{"code":"apt install rt-tests stress-ng stress\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-cfac1d"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-c26520"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dde071"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-c26520"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dde071"},"children":[{"type":"text","value":"rt-tests"}]},{"type":"element","tag":"span","props":{"class":"ct-c26520"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dde071"},"children":[{"type":"text","value":"stress-ng"}]},{"type":"element","tag":"span","props":{"class":"ct-c26520"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dde071"},"children":[{"type":"text","value":"stress"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"realtime-tracing"},"children":[{"type":"text","value":"Realtime Tracing"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There's also some methods builtin to the kernel for using tracers.\nTo identify which part of the kernel is causing the most amount of latency"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.osadl.org/Create-a-frequency-plot-from-data-of-har.bash-script-for-hwlat-plots.0.html","rel":["nofollow"]},"children":[{"type":"text","value":"https://www.osadl.org/Create-a-frequency-plot-from-data-of-har.bash-script-for-hwlat-plots.0.html"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://groups.google.com/g/fa.linux.kernel/c/dD4CQyPEa6I","rel":["nofollow"]},"children":[{"type":"text","value":"https://groups.google.com/g/fa.linux.kernel/c/dD4CQyPEa6I"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.brendangregg.com/blog/2016-06-08/linux-hist-triggers.html","rel":["nofollow"]},"children":[{"type":"text","value":"https://www.brendangregg.com/blog/2016-06-08/linux-hist-triggers.html"}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-dde071{color:#0A3069}\n.ct-c26520{color:#24292F}\n.ct-cfac1d{color:#953800}\n.dark .ct-cfac1d{color:#FFA657}\n.dark .ct-c26520{color:#C9D1D9}\n.dark .ct-dde071{color:#A5D6FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"stress-testing","depth":2,"text":"Stress Testing"},{"id":"realtime-tracing","depth":2,"text":"Realtime Tracing"}]}},"_type":"markdown","_id":"content:1.os:5.benchmarking:2.other.md","_source":"content","_file":"1.os/5.benchmarking/2.other.md","_extension":"md"},{"_path":"/userspace/_dir","_dir":"userspace","_draft":false,"_partial":true,"_locale":"","title":"Userspace","_id":"content:3.userspace:_dir.yml","_type":"yaml","_source":"content","_file":"3.userspace/_dir.yml","_extension":"yml"},{"_path":"/userspace/linuxcnc/_dir","_dir":"linuxcnc","_draft":false,"_partial":true,"_locale":"","title":"LinuxCNC","_id":"content:3.userspace:1.linuxcnc:_dir.yml","_type":"yaml","_source":"content","_file":"3.userspace/1.linuxcnc/_dir.yml","_extension":"yml"},{"_path":"/userspace/linuxcnc","_dir":"userspace","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Install LinuxCNC","description":"With Debian bookworm installed we can use pre-compiled packages to make life easier.\nThis includes 32bit or 64bit for aarch64.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"install-linuxcnc"},"children":[{"type":"text","value":"Install LinuxCNC"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"With Debian bookworm installed we can use pre-compiled packages to make life easier."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThis includes 32bit or 64bit for aarch64."}]},{"type":"element","tag":"code","props":{"code":"apt install linuxcnc-uspace linuxcnc-uspace-dev\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-f4c157"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-558472"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c84fda"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-558472"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c84fda"},"children":[{"type":"text","value":"linuxcnc-uspace"}]},{"type":"element","tag":"span","props":{"class":"ct-558472"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c84fda"},"children":[{"type":"text","value":"linuxcnc-uspace-dev"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"basic-sim-config"},"children":[{"type":"text","value":"Basic Sim Config"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"http://linuxcnc.org/docs/html/getting-started/running-linuxcnc.html","rel":["nofollow"]},"children":[{"type":"text","value":"http://linuxcnc.org/docs/html/getting-started/running-linuxcnc.html"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To do some basic configuration using a simulated setup."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The first step is to run "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"linuxcnc"}]},{"type":"text","value":" to setup a configuration."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The configurations are actually stored within "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/usr/share/doc/linuxcnc/examples/sample-configs"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"They are then copied across to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":" ~/linuxcnc/configs"}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-c84fda{color:#0A3069}\n.ct-558472{color:#24292F}\n.ct-f4c157{color:#953800}\n.dark .ct-f4c157{color:#FFA657}\n.dark .ct-558472{color:#C9D1D9}\n.dark .ct-c84fda{color:#A5D6FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"basic-sim-config","depth":2,"text":"Basic Sim Config"}]}},"_type":"markdown","_id":"content:3.userspace:1.linuxcnc:0.index.md","_source":"content","_file":"3.userspace/1.linuxcnc/0.index.md","_extension":"md"},{"_path":"/userspace/linuxcnc/build","_dir":"linuxcnc","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Build LinuxCNC","description":"The below is based on the fact we're currently using Debian version 12 Bookworm","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"build-linuxcnc"},"children":[{"type":"text","value":"Build LinuxCNC"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The below is based on the fact we're currently using Debian version 12 Bookworm"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://gnipsel.com/linuxcnc/index.html","rel":["nofollow"]},"children":[{"type":"text","value":"https://gnipsel.com/linuxcnc/index.html"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://gnipsel.com/linuxcnc/debian-11-emc.html","rel":["nofollow"]},"children":[{"type":"text","value":"https://gnipsel.com/linuxcnc/debian-11-emc.html"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://docs.google.com/document/d/1jeV_4VKzVmOIzbB-ytcgsW2I_PhCm1x7oiw8VcLFdiY/edit","rel":["nofollow"]},"children":[{"type":"text","value":"https://docs.google.com/document/d/1jeV_4VKzVmOIzbB-ytcgsW2I_PhCm1x7oiw8VcLFdiY/edit"}]}]}]},{"type":"element","tag":"h2","props":{"id":"dependencies"},"children":[{"type":"text","value":"Dependencies"}]},{"type":"element","tag":"code","props":{"code":"# First install some dependencies\napt install build-essential devscripts gdebi debhelper dh-python libudev-dev autoconf automake bwidget \\\nintltool libboost-python-dev libepoxy-dev libgl1-mesa-dev libglu1-mesa-dev libgtk2.0-dev libgtk-3-dev libmodbus-dev \\\nlibxmu-dev netcat-openbsd po4a python3-dev python3-tk python3-xlib tcl8.6-dev tclx tk8.6-dev yapps2 \\\nasciidoc dblatex docbook-xsl dvipng groff imagemagick inkscape python3-lxml source-highlight w3c-linkchecker xsltproc \\\ntexlive-extra-utils texlive-font-utils texlive-fonts-recommended texlive-lang-cyrillic \\\ntexlive-lang-french texlive-lang-german texlive-lang-polish texlive-lang-spanish texlive-xetex \\\ntexlive-latex-recommended asciidoc-dblatex texlive-lang-european \\\ndesktop-file-utils libusb-1.0-0-dev fonts-dejavu graphviz libeditreadline-dev\n\n# Make sure the system is updated\napt update\napt upgrade\napt dist-upgrade\napt autoremove\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-774def"},"children":[{"type":"text","value":"# First install some dependencies\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-151097"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"build-essential"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"devscripts"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"gdebi"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"debhelper"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"dh-python"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"libudev-dev"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"autoconf"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"automake"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"bwidget"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cc6866"},"children":[{"type":"text","value":"\\\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":"intltool "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"libboost-python-dev"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"libepoxy-dev"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"libgl1-mesa-dev"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"libglu1-mesa-dev"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"libgtk2."}]},{"type":"element","tag":"span","props":{"class":"ct-cc6866"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"-dev"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"libgtk-"}]},{"type":"element","tag":"span","props":{"class":"ct-cc6866"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"-dev"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"libmodbus-dev"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cc6866"},"children":[{"type":"text","value":"\\\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":"libxmu-dev "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"netcat-openbsd"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"po4a"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"python3-dev"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"python3-tk"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"python3-xlib"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"tcl8."}]},{"type":"element","tag":"span","props":{"class":"ct-cc6866"},"children":[{"type":"text","value":"6"}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"-dev"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"tclx"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"tk8."}]},{"type":"element","tag":"span","props":{"class":"ct-cc6866"},"children":[{"type":"text","value":"6"}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"-dev"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"yapps2"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cc6866"},"children":[{"type":"text","value":"\\\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":"asciidoc "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"dblatex"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"docbook-xsl"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"dvipng"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"groff"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"imagemagick"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"inkscape"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"python3-lxml"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"source-highlight"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"w3c-linkchecker"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"xsltproc"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cc6866"},"children":[{"type":"text","value":"\\\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":"texlive-extra-utils "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"texlive-font-utils"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"texlive-fonts-recommended"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"texlive-lang-cyrillic"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cc6866"},"children":[{"type":"text","value":"\\\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":"texlive-lang-french "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"texlive-lang-german"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"texlive-lang-polish"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"texlive-lang-spanish"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"texlive-xetex"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cc6866"},"children":[{"type":"text","value":"\\\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":"texlive-latex-recommended "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"asciidoc-dblatex"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"texlive-lang-european"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cc6866"},"children":[{"type":"text","value":"\\\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":"desktop-file-utils "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"libusb-"}]},{"type":"element","tag":"span","props":{"class":"ct-cc6866"},"children":[{"type":"text","value":"1.0"}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-cc6866"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"-dev"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"fonts-dejavu"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"graphviz"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"libeditreadline-dev\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-774def"},"children":[{"type":"text","value":"# Make sure the system is updated\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-151097"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"update\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-151097"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"upgrade\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-151097"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"dist-upgrade\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-151097"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"autoremove"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"At this point it's probably best to close / re-open the ssh session"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nto get python to show up in the path"}]},{"type":"element","tag":"h2","props":{"id":"build-sources"},"children":[{"type":"text","value":"Build Sources"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"First download the sources"}]},{"type":"element","tag":"code","props":{"code":"git clone https://github.com/LinuxCNC/linuxcnc.git build\ncd build\n\n# Switch to the 2.9 branch\ngit checkout 2.9\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-151097"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"clone"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"https://github.com/LinuxCNC/linuxcnc.git"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"build\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc6866"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"build\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-774def"},"children":[{"type":"text","value":"# Switch to the 2.9 branch\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-151097"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"checkout"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cc6866"},"children":[{"type":"text","value":"2.9"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Next to build the deb files"}]},{"type":"element","tag":"code","props":{"code":"# run debian configure without docs\ndebian/configure uspace no-docs\n\n# check for any unmet depends\ndpkg-checkbuilddeps\n\n# Build the deb\ndebuild -uc -us\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-774def"},"children":[{"type":"text","value":"# run debian configure without docs\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-151097"},"children":[{"type":"text","value":"debian/configure"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"uspace"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"no-docs\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-774def"},"children":[{"type":"text","value":"# check for any unmet depends\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-151097"},"children":[{"type":"text","value":"dpkg-checkbuilddeps\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-774def"},"children":[{"type":"text","value":"# Build the deb\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-151097"},"children":[{"type":"text","value":"debuild"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cc6866"},"children":[{"type":"text","value":"-uc"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cc6866"},"children":[{"type":"text","value":"-us"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"running-tests"},"children":[{"type":"text","value":"Running Tests"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To run tests"}]},{"type":"element","tag":"code","props":{"code":"source ./scripts/rip-environment\n./scripts/runtests\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc6866"},"children":[{"type":"text","value":"source"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"./scripts/rip-environment\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc6866"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-151097"},"children":[{"type":"text","value":"/scripts/runtests"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"running-from-source"},"children":[{"type":"text","value":"Running from Source"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To Run from source"}]},{"type":"element","tag":"code","props":{"code":"source ./scripts/rip-environment\n./scripts/latency-histogram --nobase --sbinsize 1000 --show\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc6866"},"children":[{"type":"text","value":"source"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"./scripts/rip-environment\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc6866"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-151097"},"children":[{"type":"text","value":"/scripts/latency-histogram"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cc6866"},"children":[{"type":"text","value":"--nobase"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cc6866"},"children":[{"type":"text","value":"--sbinsize"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cc6866"},"children":[{"type":"text","value":"1000"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cc6866"},"children":[{"type":"text","value":"--show"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"install-debs"},"children":[{"type":"text","value":"Install Debs"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you want to install the generated debs"}]},{"type":"element","tag":"code","props":{"code":"# gdebi allows us to more easily install deb files\napt install gdebi\n\n# If you want to remove the existing installed linuxcnc\napt remove linuxcnc-uspace\n\n# install deb files\ngdebi linuxcnc-uspace_2.9.0~pre1_arm64.deb linuxcnc-uspace-dev_2.9.0~pre1_armhf.deb linuxcnc-uspace-dbgsym_2.9.0~pre1_armhf.deb\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-774def"},"children":[{"type":"text","value":"# gdebi allows us to more easily install deb files\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-151097"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"gdebi\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-774def"},"children":[{"type":"text","value":"# If you want to remove the existing installed linuxcnc\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-151097"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"remove"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"linuxcnc-uspace\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-774def"},"children":[{"type":"text","value":"# install deb files\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-151097"},"children":[{"type":"text","value":"gdebi"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"linuxcnc-uspace_2."}]},{"type":"element","tag":"span","props":{"class":"ct-cc6866"},"children":[{"type":"text","value":"9.0"}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"~pre1_arm64.deb"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"linuxcnc-uspace-dev_2."}]},{"type":"element","tag":"span","props":{"class":"ct-cc6866"},"children":[{"type":"text","value":"9.0"}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"~pre1_armhf.deb"}]},{"type":"element","tag":"span","props":{"class":"ct-fafc45"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"linuxcnc-uspace-dbgsym_2."}]},{"type":"element","tag":"span","props":{"class":"ct-cc6866"},"children":[{"type":"text","value":"9.0"}]},{"type":"element","tag":"span","props":{"class":"ct-7151f7"},"children":[{"type":"text","value":"~pre1_armhf.deb"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-cc6866{color:#0550AE}\n.ct-7151f7{color:#0A3069}\n.ct-fafc45{color:#24292F}\n.ct-151097{color:#953800}\n.ct-774def{color:#6E7781}\n.dark .ct-774def{color:#8B949E}\n.dark .ct-151097{color:#FFA657}\n.dark .ct-fafc45{color:#C9D1D9}\n.dark .ct-7151f7{color:#A5D6FF}\n.dark .ct-cc6866{color:#79C0FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"dependencies","depth":2,"text":"Dependencies"},{"id":"build-sources","depth":2,"text":"Build Sources"},{"id":"running-tests","depth":2,"text":"Running Tests"},{"id":"running-from-source","depth":2,"text":"Running from Source"},{"id":"install-debs","depth":2,"text":"Install Debs"}]}},"_type":"markdown","_id":"content:3.userspace:1.linuxcnc:1.build.md","_source":"content","_file":"3.userspace/1.linuxcnc/1.build.md","_extension":"md"},{"_path":"/userspace/linuxcnc/mesaflash","_dir":"linuxcnc","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Mesaflash","description":"Mesaflash is a tool for use with mesa FPGA cards typically used with LinuxCNC","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"mesaflash"},"children":[{"type":"text","value":"Mesaflash"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mesaflash is a tool for use with mesa FPGA cards typically used with LinuxCNC"}]},{"type":"element","tag":"h2","props":{"id":"installing-from-packages"},"children":[{"type":"text","value":"Installing from Packages"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To install mesaflash using apt"}]},{"type":"element","tag":"code","props":{"code":"apt install mesaflash\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-163307"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-6473c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-eb1647"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-6473c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-eb1647"},"children":[{"type":"text","value":"mesaflash"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"installing-from-sources"},"children":[{"type":"text","value":"Installing from Sources"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To build mesaflash from sources"}]},{"type":"element","tag":"code","props":{"code":"apt install libpci-dev libmd-dev pkg-config\ngit clone https://github.com/LinuxCNC/mesaflash.git\ncd mesaflash\nmake\nmake install\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-163307"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-6473c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-eb1647"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-6473c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-eb1647"},"children":[{"type":"text","value":"libpci-dev"}]},{"type":"element","tag":"span","props":{"class":"ct-6473c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-eb1647"},"children":[{"type":"text","value":"libmd-dev"}]},{"type":"element","tag":"span","props":{"class":"ct-6473c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-eb1647"},"children":[{"type":"text","value":"pkg-config\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-163307"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"class":"ct-6473c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-eb1647"},"children":[{"type":"text","value":"clone"}]},{"type":"element","tag":"span","props":{"class":"ct-6473c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-eb1647"},"children":[{"type":"text","value":"https://github.com/LinuxCNC/mesaflash.git\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-12b705"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"class":"ct-6473c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-eb1647"},"children":[{"type":"text","value":"mesaflash\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-163307"},"children":[{"type":"text","value":"make\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-163307"},"children":[{"type":"text","value":"make"}]},{"type":"element","tag":"span","props":{"class":"ct-6473c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-eb1647"},"children":[{"type":"text","value":"install"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-12b705{color:#0550AE}\n.ct-eb1647{color:#0A3069}\n.ct-6473c9{color:#24292F}\n.ct-163307{color:#953800}\n.dark .ct-163307{color:#FFA657}\n.dark .ct-6473c9{color:#C9D1D9}\n.dark .ct-eb1647{color:#A5D6FF}\n.dark .ct-12b705{color:#79C0FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"installing-from-packages","depth":2,"text":"Installing from Packages"},{"id":"installing-from-sources","depth":2,"text":"Installing from Sources"}]}},"_type":"markdown","_id":"content:3.userspace:1.linuxcnc:3.mesaflash.md","_source":"content","_file":"3.userspace/1.linuxcnc/3.mesaflash.md","_extension":"md"},{"_path":"/diskimages/_dir","_dir":"diskimages","_draft":false,"_partial":true,"_locale":"","title":"Disk Images","_id":"content:4.diskimages:_dir.yml","_type":"yaml","_source":"content","_file":"4.diskimages/_dir.yml","_extension":"yml"},{"_path":"/diskimages/stock","_dir":"diskimages","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Stock Image","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"linuxcnc-rpi4-stock-image"},"children":[{"type":"text","value":"LinuxCNC Rpi4 Stock Image"}]},{"type":"element","tag":"list","props":{"type":"success"},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"http://linuxcnc.org/downloads/","rel":["nofollow"]},"children":[{"type":"text","value":"LinuxCNC Downloads Page"}]}]}]}]},{"type":"element","tag":"list","props":{"type":"warning"},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.linuxcnc.org/iso/linuxcnc-2.8.1-pi4.zip","rel":["nofollow"]},"children":[{"type":"text","value":"LinuxCNC Original Pi4 Image - 2.8.1"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For the Raspberry Pi4 there is an image available from the linuxcnc for download."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThis is useful to get a baseline of what latency figures we might get with a newer setup."}]},{"type":"element","tag":"h2","props":{"id":"patched-bootloader"},"children":[{"type":"text","value":"Patched Bootloader"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"However, I have found for this version that the bootloader files are not compatible\nif the Rpi4 has been updated with the latest EEPROM."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nTo fix this it's just a case of copying the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"start*"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"fixup*"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"bootcode.bin"}]},{"type":"text","value":" files across from a working vfat partition."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n(bootcode.bin isn't actually used by the Pi4, but we might as well copy it at the same time)"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nI've placed a patched image here:"}]},{"type":"element","tag":"list","props":{"type":"success"},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"http://lfs.hecatron.com/linuxcnc/linuxcnc-2.8.1-pi4-fwpatched.7z","rel":["nofollow"]},"children":[{"type":"text","value":"LinuxCNC Patched Pi4 Image - 2.8.1"}]}]}]}]},{"type":"element","tag":"alert","props":{"type":"danger"},"children":[{"type":"element","tag":"list","props":{"type":"warning"},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Warning"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Attempting to do an "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"apt upgrade"}]},{"type":"text","value":" does seem to break the system.\nIt removes the boot files mentioned above and breaks wifi.\nI think this is related to the kernel it's trying to update.\nYou can re-add the boot files again outside of the system, but wifi will remain broken for some reason."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Reading the forums in the future they may be moving to something like armbian.\nSo this is really only a temporary fix, just to get something working as a benchmark.\nSince it's an old image and can't be updated without some messing about."}]},{"type":"element","tag":"h2","props":{"id":"latency"},"children":[{"type":"text","value":"Latency"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The results of"}]},{"type":"element","tag":"code","props":{"code":"latency-histogram --nobase --sbinsize 1000 --show\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d7045"},"children":[{"type":"text","value":"latency-histogram"}]},{"type":"element","tag":"span","props":{"class":"ct-ddd3f2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3e6773"},"children":[{"type":"text","value":"--nobase"}]},{"type":"element","tag":"span","props":{"class":"ct-ddd3f2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3e6773"},"children":[{"type":"text","value":"--sbinsize"}]},{"type":"element","tag":"span","props":{"class":"ct-ddd3f2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3e6773"},"children":[{"type":"text","value":"1000"}]},{"type":"element","tag":"span","props":{"class":"ct-ddd3f2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3e6773"},"children":[{"type":"text","value":"--show"}]}]}]}]}]},{"type":"element","tag":"card-grid","props":{},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Histogram"}]}]},{"type":"element","tag":"template","props":{"v-slot:root":""},"children":[{"type":"element","tag":"ellipsis","props":{},"children":[]}]},{"type":"element","tag":"card","props":{},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Without glxgears."}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"nuxt-img","props":{"src":"/diskimages/2.8-stock-nogears.png","width":"300"},"children":[]}]}]},{"type":"element","tag":"card","props":{},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"With glxgears x10"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"nuxt-img","props":{"src":"/diskimages/2.8-stock-10gears.png","width":"300"},"children":[]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-3e6773{color:#0550AE}\n.ct-ddd3f2{color:#24292F}\n.ct-4d7045{color:#953800}\n.dark .ct-4d7045{color:#FFA657}\n.dark .ct-ddd3f2{color:#C9D1D9}\n.dark .ct-3e6773{color:#79C0FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"patched-bootloader","depth":2,"text":"Patched Bootloader"},{"id":"latency","depth":2,"text":"Latency"}]}},"_type":"markdown","_id":"content:4.diskimages:1.stock.md","_source":"content","_file":"4.diskimages/1.stock.md","_extension":"md"},{"_path":"/diskimages/dietpi","_dir":"diskimages","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"DietPi Image","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"linuxcnc-rpi4-dietpi-image"},"children":[{"type":"text","value":"LinuxCNC Rpi4 DietPi Image"}]},{"type":"element","tag":"alert","props":{"type":"danger"},"children":[{"type":"element","tag":"list","props":{"type":"warning"},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Warning"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This is not an officially supported image."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nIt's just one I've thrown together using dietpi as a basis."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThis is not supported."}]}]},{"type":"element","tag":"h2","props":{"id":"download-links"},"children":[{"type":"text","value":"Download Links"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This image contains DietPi and LinuxCNC 2.9, with a realtime 6.3 64bit kernel"}]},{"type":"element","tag":"list","props":{"type":"success"},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"http://lfs.hecatron.com/linuxcnc/DietPi_Rpi-ARMv8-Bookworm-LinuxCNC2.9.7z","rel":["nofollow"]},"children":[{"type":"text","value":"LinuxCNC DietPi RPI4 Image - 2.9"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"setup"},"children":[{"type":"text","value":"Setup"}]},{"type":"element","tag":"h3","props":{"id":"password-change"},"children":[{"type":"text","value":"Password Change"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The first thing you may want to do is change the default password."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nFor the dietpi and root users the default is "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"dietpi"}]},{"type":"text","value":" for the password"}]},{"type":"element","tag":"code","props":{"code":"# Change the logged on dietpi password\npasswd\n# Change the root password\nsudo passwd\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-741ea9"},"children":[{"type":"text","value":"# Change the logged on dietpi password\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-bd90ab"},"children":[{"type":"text","value":"passwd\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-741ea9"},"children":[{"type":"text","value":"# Change the root password\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-bd90ab"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-bb43f4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f02537"},"children":[{"type":"text","value":"passwd"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"wifi"},"children":[{"type":"text","value":"WIFI"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Next is WIFI, when first booting up it may take a couple of minutes to boot."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThis is due to WIFI already being enabled but there is no SSID configured."}]},{"type":"element","tag":"code","props":{"code":"# Open Up the dietpi config menu\nsudo dietpi-config\n# Select Network Options: Adapters\n# Select Wifi\n# Select Scan\n# Then pick which wifi SSID to connect to long with the WPA Password.\n# Select Back / Apply\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-741ea9"},"children":[{"type":"text","value":"# Open Up the dietpi config menu\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-bd90ab"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-bb43f4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f02537"},"children":[{"type":"text","value":"dietpi-config\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-741ea9"},"children":[{"type":"text","value":"# Select Network Options: Adapters\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-741ea9"},"children":[{"type":"text","value":"# Select Wifi\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-741ea9"},"children":[{"type":"text","value":"# Select Scan\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-741ea9"},"children":[{"type":"text","value":"# Then pick which wifi SSID to connect to long with the WPA Password.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-741ea9"},"children":[{"type":"text","value":"# Select Back / Apply"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"After setting up the WIFI it's best to do a reboot."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThis will allow the NTP service to run and select the correct date / time."}]},{"type":"element","tag":"h3","props":{"id":"linux-kernel-versions"},"children":[{"type":"text","value":"Linux Kernel Versions"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To select which kernel version to use, edit the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/boot/config.txt file"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This is the default, it selects the 6.3 relatime kernel"}]},{"type":"element","tag":"code","props":{"code":"os_prefix=/rt-6.3/\n#os_prefix=/rt-6.4/\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb43f4"},"children":[{"type":"text","value":"os_prefix"}]},{"type":"element","tag":"span","props":{"class":"ct-214998"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-f02537"},"children":[{"type":"text","value":"/rt-"}]},{"type":"element","tag":"span","props":{"class":"ct-965d40"},"children":[{"type":"text","value":"6.3"}]},{"type":"element","tag":"span","props":{"class":"ct-f02537"},"children":[{"type":"text","value":"/\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-741ea9"},"children":[{"type":"text","value":"#os_prefix=/rt-6.4/"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This selects a 6.4.0-rc2 realtime kernel"}]},{"type":"element","tag":"code","props":{"code":"#os_prefix=/rt-6.3/\nos_prefix=/rt-6.4/\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-741ea9"},"children":[{"type":"text","value":"#os_prefix=/rt-6.3/\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb43f4"},"children":[{"type":"text","value":"os_prefix"}]},{"type":"element","tag":"span","props":{"class":"ct-214998"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-f02537"},"children":[{"type":"text","value":"/rt-"}]},{"type":"element","tag":"span","props":{"class":"ct-965d40"},"children":[{"type":"text","value":"6.4"}]},{"type":"element","tag":"span","props":{"class":"ct-f02537"},"children":[{"type":"text","value":"/"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This defaults to the non realtime raspian kernel 6.1.21-v8+"}]},{"type":"element","tag":"code","props":{"code":"#os_prefix=/rt-6.3/\n#os_prefix=/rt-6.4/\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-741ea9"},"children":[{"type":"text","value":"#os_prefix=/rt-6.3/\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-741ea9"},"children":[{"type":"text","value":"#os_prefix=/rt-6.4/"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"kernel-sources-patches"},"children":[{"type":"text","value":"Kernel Sources / Patches"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For 6.3"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/raspberrypi/linux/archive/2d0a7ff52ebfe7bc1c08fd7e444b9ce3d34385bf.tar.gz","rel":["nofollow"]},"children":[{"type":"text","value":"https://github.com/raspberrypi/linux/archive/2d0a7ff52ebfe7bc1c08fd7e444b9ce3d34385bf.tar.gz"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://mirrors.edge.kernel.org/pub/linux/kernel/projects/rt/6.3/patch-6.3.3-rt15.patch.xz","rel":["nofollow"]},"children":[{"type":"text","value":"https://mirrors.edge.kernel.org/pub/linux/kernel/projects/rt/6.3/patch-6.3.3-rt15.patch.xz"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For 6.4"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/raspberrypi/linux/archive/cef1cb8a5cff96f4c8aeca7b2e7c1a3ba8828b9e.tar.gz","rel":["nofollow"]},"children":[{"type":"text","value":"https://github.com/raspberrypi/linux/archive/cef1cb8a5cff96f4c8aeca7b2e7c1a3ba8828b9e.tar.gz"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://mirrors.edge.kernel.org/pub/linux/kernel/projects/rt/6.4/patch-6.4-rc2-rt1.patch.xz","rel":["nofollow"]},"children":[{"type":"text","value":"https://mirrors.edge.kernel.org/pub/linux/kernel/projects/rt/6.4/patch-6.4-rc2-rt1.patch.xz"}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-965d40{color:#0550AE}\n.ct-214998{color:#CF222E}\n.ct-f02537{color:#0A3069}\n.ct-bb43f4{color:#24292F}\n.ct-bd90ab{color:#953800}\n.ct-741ea9{color:#6E7781}\n.dark .ct-741ea9{color:#8B949E}\n.dark .ct-bd90ab{color:#FFA657}\n.dark .ct-bb43f4{color:#C9D1D9}\n.dark .ct-f02537{color:#A5D6FF}\n.dark .ct-214998{color:#FF7B72}\n.dark .ct-965d40{color:#79C0FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"download-links","depth":2,"text":"Download Links"},{"id":"setup","depth":2,"text":"Setup","children":[{"id":"password-change","depth":3,"text":"Password Change"},{"id":"wifi","depth":3,"text":"WIFI"},{"id":"linux-kernel-versions","depth":3,"text":"Linux Kernel Versions"},{"id":"kernel-sources-patches","depth":3,"text":"Kernel Sources / Patches"}]}]}},"_type":"markdown","_id":"content:4.diskimages:2.dietpi.md","_source":"content","_file":"4.diskimages/2.dietpi.md","_extension":"md"},{"_path":"/hardware/mesa/test","_dir":"mesa","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Mesa 7i96s","description":"The Mesa 7i96s board is an ethernet attached breakout board for linuxcnc.\nI think it can be hooked up to an RPI4 using the ethernet port.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"mesa-7i96s"},"children":[{"type":"text","value":"Mesa 7i96s"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The Mesa 7i96s board is an ethernet attached breakout board for linuxcnc."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nI think it can be hooked up to an RPI4 using the ethernet port."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"http://www.mesanet.com/pdf/parallel/7i96man.pdf","rel":["nofollow"]},"children":[{"type":"text","value":"http://www.mesanet.com/pdf/parallel/7i96man.pdf"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://wiki.printnc.info/en/controllers/linuxcnc/7i96","rel":["nofollow"]},"children":[{"type":"text","value":"https://wiki.printnc.info/en/controllers/linuxcnc/7i96"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"http://store.mesanet.com/index.php?route=product/product&product_id=374","rel":["nofollow"]},"children":[{"type":"text","value":"http://store.mesanet.com/index.php?route=product/product&product_id=374"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Specs"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Step Rate 10Mhz"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"5 Axis"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"11 isolated inputs"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"6 isolated outputs"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"A RS-422/RS485 serial port"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"A parallel port"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"An isolated analog spindle output allows spindle speed control"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"A high speed encoder interface is provided for spindle synchronized motion"}]}]},{"type":"element","tag":"h2","props":{"id":"other-boards"},"children":[{"type":"text","value":"Other Boards"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"http://store.mesanet.com/index.php?route=product/product&path=83_85&product_id=338","rel":["nofollow"]},"children":[{"type":"text","value":"http://store.mesanet.com/index.php?route=product/product&path=83_85&product_id=338"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"http://store.mesanet.com/index.php?route=product/category&path=83_85","rel":["nofollow"]},"children":[{"type":"text","value":"http://store.mesanet.com/index.php?route=product/category&path=83_85"}]}]}]},{"type":"element","tag":"h2","props":{"id":"links"},"children":[{"type":"text","value":"Links"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://linuxcnc.org/docs/2.7/html/drivers/hostmot2.html#_installing_firmware","rel":["nofollow"]},"children":[{"type":"text","value":"https://linuxcnc.org/docs/2.7/html/drivers/hostmot2.html#_installing_firmware"}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"other-boards","depth":2,"text":"Other Boards"},{"id":"links","depth":2,"text":"Links"}]}},"_type":"markdown","_id":"content:5.hardware:1.mesa:test.md","_source":"content","_file":"5.hardware/1.mesa/test.md","_extension":"md"},{"_path":"/hardware/ethercat/_dir","_dir":"ethercat","_draft":false,"_partial":true,"_locale":"","title":"EtherCat","_id":"content:5.hardware:2.ethercat:_dir.yml","_type":"yaml","_source":"content","_file":"5.hardware/2.ethercat/_dir.yml","_extension":"yml"},{"_path":"/hardware/ethercat","_dir":"hardware","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"EtherCat","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"ethercat"},"children":[{"type":"text","value":"EtherCat"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://forum.linuxcnc.org/ethercat/45336-ethercat-installation-from-repositories-how-to-step-by-step?start=0","rel":["nofollow"]},"children":[{"type":"text","value":"https://forum.linuxcnc.org/ethercat/45336-ethercat-installation-from-repositories-how-to-step-by-step?start=0"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/feecat/XMC4300_EtherCAT_CoreBoard","rel":["nofollow"]},"children":[{"type":"text","value":"https://github.com/feecat/XMC4300_EtherCAT_CoreBoard"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/feecat/XMC4300_Motor_Controller","rel":["nofollow"]},"children":[{"type":"text","value":"https://github.com/feecat/XMC4300_Motor_Controller"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://bitbucket.org/harmonicbionics/esmacat_master_software/src/master/","rel":["nofollow"]},"children":[{"type":"text","value":"https://bitbucket.org/harmonicbionics/esmacat_master_software/src/master/"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.crowdsupply.com/harmonic-bionics/ease/#products","rel":["nofollow"]},"children":[{"type":"text","value":"https://www.crowdsupply.com/harmonic-bionics/ease/#products"}]}]}]},{"type":"element","tag":"h2","props":{"id":"install"},"children":[{"type":"text","value":"Install"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For bookworm we add the following to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/etc/apt/sources.list"}]}]},{"type":"element","tag":"code","props":{"code":"deb [allow-insecure=yes] https://download.opensuse.org/repositories/home:/bone11111:/branches:/science:/EtherLab/Debian_Testing/ ./\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-0db795"},"children":[{"type":"text","value":"deb"}]},{"type":"element","tag":"span","props":{"class":"ct-18b0de"},"children":[{"type":"text","value":" [allow-insecure"}]},{"type":"element","tag":"span","props":{"class":"ct-29d528"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18b0de"},"children":[{"type":"text","value":"yes] "}]},{"type":"element","tag":"span","props":{"class":"ct-3b44d0"},"children":[{"type":"text","value":"https://download.opensuse.org/repositories/home:/bone11111:/branches:/science:/EtherLab/Debian_Testing/"}]},{"type":"element","tag":"span","props":{"class":"ct-18b0de"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3b44d0"},"children":[{"type":"text","value":"./"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Install some dependencies and update"}]},{"type":"element","tag":"code","props":{"code":"sudo apt install curl git\nsudo apt update\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-0db795"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-18b0de"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3b44d0"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-18b0de"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3b44d0"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-18b0de"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3b44d0"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-18b0de"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3b44d0"},"children":[{"type":"text","value":"git\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-0db795"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-18b0de"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3b44d0"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-18b0de"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3b44d0"},"children":[{"type":"text","value":"update"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Create a security key"}]},{"type":"element","tag":"code","props":{"code":"KEYRING=/usr/share/keyrings/ethercat.gpg\ncurl -fsSL https://download.opensuse.org/repositories/home:/bone11111:/branches:/science:/EtherLab/Debian_Testing/Release.key | gpg --dearmor | sudo tee \"$KEYRING\" >/dev/null\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-18b0de"},"children":[{"type":"text","value":"KEYRING"}]},{"type":"element","tag":"span","props":{"class":"ct-29d528"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3b44d0"},"children":[{"type":"text","value":"/usr/share/keyrings/ethercat.gpg\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-0db795"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-18b0de"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1f6376"},"children":[{"type":"text","value":"-fsSL"}]},{"type":"element","tag":"span","props":{"class":"ct-18b0de"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3b44d0"},"children":[{"type":"text","value":"https://download.opensuse.org/repositories/home:/bone11111:/branches:/science:/EtherLab/Debian_Testing/Release.key"}]},{"type":"element","tag":"span","props":{"class":"ct-18b0de"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-29d528"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-18b0de"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0db795"},"children":[{"type":"text","value":"gpg"}]},{"type":"element","tag":"span","props":{"class":"ct-18b0de"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1f6376"},"children":[{"type":"text","value":"--dearmor"}]},{"type":"element","tag":"span","props":{"class":"ct-18b0de"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-29d528"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-18b0de"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0db795"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-18b0de"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3b44d0"},"children":[{"type":"text","value":"tee"}]},{"type":"element","tag":"span","props":{"class":"ct-18b0de"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3b44d0"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-18b0de"},"children":[{"type":"text","value":"$KEYRING"}]},{"type":"element","tag":"span","props":{"class":"ct-3b44d0"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-18b0de"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-29d528"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-3b44d0"},"children":[{"type":"text","value":"/dev/null"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Install EtherCat"}]},{"type":"element","tag":"code","props":{"code":"sudo apt-get install ethercat-dkms libethercat libethercat-dev ethercat-master\n","language":"sh","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-0db795"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-18b0de"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3b44d0"},"children":[{"type":"text","value":"apt-get"}]},{"type":"element","tag":"span","props":{"class":"ct-18b0de"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3b44d0"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-18b0de"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3b44d0"},"children":[{"type":"text","value":"ethercat-dkms"}]},{"type":"element","tag":"span","props":{"class":"ct-18b0de"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3b44d0"},"children":[{"type":"text","value":"libethercat"}]},{"type":"element","tag":"span","props":{"class":"ct-18b0de"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3b44d0"},"children":[{"type":"text","value":"libethercat-dev"}]},{"type":"element","tag":"span","props":{"class":"ct-18b0de"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3b44d0"},"children":[{"type":"text","value":"ethercat-master"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"TODO There's currently an issue installing "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ethercat-dkms"}]},{"type":"text","value":" due to the lack of kernel headers for 6.3"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-1f6376{color:#0550AE}\n.ct-3b44d0{color:#0A3069}\n.ct-29d528{color:#CF222E}\n.ct-18b0de{color:#24292F}\n.ct-0db795{color:#953800}\n.dark .ct-0db795{color:#FFA657}\n.dark .ct-18b0de{color:#C9D1D9}\n.dark .ct-29d528{color:#FF7B72}\n.dark .ct-3b44d0{color:#A5D6FF}\n.dark .ct-1f6376{color:#79C0FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"install","depth":2,"text":"Install"}]}},"_type":"markdown","_id":"content:5.hardware:2.ethercat:0.index.md","_source":"content","_file":"5.hardware/2.ethercat/0.index.md","_extension":"md"},{"_path":"/notes/_dir","_dir":"notes","_draft":false,"_partial":true,"_locale":"","title":"Notes","_id":"content:6.notes:_dir.yml","_type":"yaml","_source":"content","_file":"6.notes/_dir.yml","_extension":"yml"},{"_path":"/notes/results","_dir":"notes","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Results","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"results"},"children":[{"type":"text","value":"Results"}]},{"type":"element","tag":"h2","props":{"id":"rpi3"},"children":[{"type":"text","value":"RPI3"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I think a 64bit image created for the RPI4 should work on the RPI3."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nHowever, when trying the latest 6.3 kernel I compiled it just bombed on bootup."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nSo this is something I'll need to check at a later point in time."}]},{"type":"element","tag":"h2","props":{"id":"hard-disk"},"children":[{"type":"text","value":"Hard Disk"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"So far I've tried with and without the USB Hard disk but with no difference in results."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nI think it's safe to boot from a USB Hard disk, at least with the RPI4."}]},{"type":"element","tag":"h2","props":{"id":"todo"},"children":[{"type":"text","value":"TODO"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"re-write the latency test script in python"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"test without glxgears / xorg at the cli"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"try Armbian"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"http://linuxcnc.org/docs/2.9/html/","rel":["nofollow"]},"children":[{"type":"text","value":"http://linuxcnc.org/docs/2.9/html/"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Check the speed is 1.8Ghz"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.raspberrypi.com/news/bullseye-bonus-1-8ghz-raspberry-pi-4/","rel":["nofollow"]},"children":[{"type":"text","value":"https://www.raspberrypi.com/news/bullseye-bonus-1-8ghz-raspberry-pi-4/"}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"rpi3","depth":2,"text":"RPI3"},{"id":"hard-disk","depth":2,"text":"Hard Disk"},{"id":"todo","depth":2,"text":"TODO"}]}},"_type":"markdown","_id":"content:6.notes:1.results.md","_source":"content","_file":"6.notes/1.results.md","_extension":"md"},{"_path":"/notes/links","_dir":"notes","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Links","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"links"},"children":[{"type":"text","value":"Links"}]},{"type":"element","tag":"h2","props":{"id":"latency"},"children":[{"type":"text","value":"Latency"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"http://wiki.linuxcnc.org/cgi-bin/wiki.pl?TweakingSoftwareStepGeneration","rel":["nofollow"]},"children":[{"type":"text","value":"http://wiki.linuxcnc.org/cgi-bin/wiki.pl?TweakingSoftwareStepGeneration"}]}]}]},{"type":"element","tag":"h2","props":{"id":"linuxcnc-drivers"},"children":[{"type":"text","value":"LinuxCNC Drivers"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://forum.linuxcnc.org/24-hal-components/38733-vfdmod-an-easy-vfd-control-over-modbus-rtu","rel":["nofollow"]},"children":[{"type":"text","value":"https://forum.linuxcnc.org/24-hal-components/38733-vfdmod-an-easy-vfd-control-over-modbus-rtu"}]}]}]},{"type":"element","tag":"h2","props":{"id":"install"},"children":[{"type":"text","value":"Install"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://forum.linuxcnc.org/9-installing-linuxcnc/39779-rpi4-raspbian-64-bit-linuxcnc","rel":["nofollow"]},"children":[{"type":"text","value":"https://forum.linuxcnc.org/9-installing-linuxcnc/39779-rpi4-raspbian-64-bit-linuxcnc"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://forum.linuxcnc.org/9-installing-linuxcnc/49029-linuxcnc-on-rpi4-rpi3-dietpi","rel":["nofollow"]},"children":[{"type":"text","value":"https://forum.linuxcnc.org/9-installing-linuxcnc/49029-linuxcnc-on-rpi4-rpi3-dietpi"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://forum.linuxcnc.org/38-general-linuxcnc-questions/44398-linuxcnc-image-for-raspberry-pi-3","rel":["nofollow"]},"children":[{"type":"text","value":"https://forum.linuxcnc.org/38-general-linuxcnc-questions/44398-linuxcnc-image-for-raspberry-pi-3"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"http://linuxcnc.org/docs/stable/html/getting-started/getting-linuxcnc.html","rel":["nofollow"]},"children":[{"type":"text","value":"http://linuxcnc.org/docs/stable/html/getting-started/getting-linuxcnc.html"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://docs.google.com/document/d/1jeV_4VKzVmOIzbB-ytcgsW2I_PhCm1x7oiw8VcLFdiY","rel":["nofollow"]},"children":[{"type":"text","value":"https://docs.google.com/document/d/1jeV_4VKzVmOIzbB-ytcgsW2I_PhCm1x7oiw8VcLFdiY"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://forum.linuxcnc.org/9-installing-linuxcnc/48512-the-case-for-debian-bookworm-and-the-6-1-kernel-including-installation-notes","rel":["nofollow"]},"children":[{"type":"text","value":"https://forum.linuxcnc.org/9-installing-linuxcnc/48512-the-case-for-debian-bookworm-and-the-6-1-kernel-including-installation-notes"}]}]}]},{"type":"element","tag":"h2","props":{"id":"hardware"},"children":[{"type":"text","value":"Hardware"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://forum.linuxcnc.org/27-driver-boards/32898-non-step-direction-interfaces","rel":["nofollow"]},"children":[{"type":"text","value":"https://forum.linuxcnc.org/27-driver-boards/32898-non-step-direction-interfaces"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://forum.linuxcnc.org/9-installing-linuxcnc/41900-linuxcnc-at-rpi4-with-using-io-pins-only","rel":["nofollow"]},"children":[{"type":"text","value":"https://forum.linuxcnc.org/9-installing-linuxcnc/41900-linuxcnc-at-rpi4-with-using-io-pins-only"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://forum.duet3d.com/topic/18694/duet-maximum-achievable-step-rates/","rel":["nofollow"]},"children":[{"type":"text","value":"https://forum.duet3d.com/topic/18694/duet-maximum-achievable-step-rates/"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://forum.linuxcnc.org/9-installing-linuxcnc/47545-installing-on-rpi-with-gpio-and-software-stepping","rel":["nofollow"]},"children":[{"type":"text","value":"https://forum.linuxcnc.org/9-installing-linuxcnc/47545-installing-on-rpi-with-gpio-and-software-stepping"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.a-m-c.com/what-is-dual-loop-position-control-and-where-is-it-needed/?cn-reloaded=1","rel":["nofollow"]},"children":[{"type":"text","value":"https://www.a-m-c.com/what-is-dual-loop-position-control-and-where-is-it-needed/?cn-reloaded=1"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nDual Loop"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/rene-dev/stmbl/blob/master/docs/src/Getting%20Started.adoc","rel":["nofollow"]},"children":[{"type":"text","value":"https://github.com/rene-dev/stmbl/blob/master/docs/src/Getting%20Started.adoc"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/jzolee/HAL2UDP","rel":["nofollow"]},"children":[{"type":"text","value":"https://github.com/jzolee/HAL2UDP"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://remora-docs.readthedocs.io/en/latest/","rel":["nofollow"]},"children":[{"type":"text","value":"https://remora-docs.readthedocs.io/en/latest/"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://forum.linuxcnc.org/38-general-linuxcnc-questions/27626-maximum-servo-thread-frequency","rel":["nofollow"]},"children":[{"type":"text","value":"https://forum.linuxcnc.org/38-general-linuxcnc-questions/27626-maximum-servo-thread-frequency"}]}]}]},{"type":"element","tag":"h2","props":{"id":"frontend"},"children":[{"type":"text","value":"Frontend"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.qtpyvcp.com/index.html","rel":["nofollow"]},"children":[{"type":"text","value":"https://www.qtpyvcp.com/index.html"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://linuxcnc.org/docs/2.9/html/gui/qtdragon.html","rel":["nofollow"]},"children":[{"type":"text","value":"https://linuxcnc.org/docs/2.9/html/gui/qtdragon.html"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.forum.linuxcnc.org/38-general-linuxcnc-questions/43513-best-way-to-do-external-controls-for-linuxcnc","rel":["nofollow"]},"children":[{"type":"text","value":"https://www.forum.linuxcnc.org/38-general-linuxcnc-questions/43513-best-way-to-do-external-controls-for-linuxcnc"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"http://linuxcnc.org/docs/2.9/html/config/python-interface.html","rel":["nofollow"]},"children":[{"type":"text","value":"http://linuxcnc.org/docs/2.9/html/config/python-interface.html"}]}]}]},{"type":"element","tag":"h2","props":{"id":"machinekit"},"children":[{"type":"text","value":"MachineKit"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Based on some of the forum posts it looks as if MachineKit doesn't have a lot of recent support."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nSo LinuxCNC seems like the best option at the moment"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.cnczone.com/forums/linuxcnc-formerly-emc2-/428714-cnc.html","rel":["nofollow"]},"children":[{"type":"text","value":"https://www.cnczone.com/forums/linuxcnc-formerly-emc2-/428714-cnc.html"}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"latency","depth":2,"text":"Latency"},{"id":"linuxcnc-drivers","depth":2,"text":"LinuxCNC Drivers"},{"id":"install","depth":2,"text":"Install"},{"id":"hardware","depth":2,"text":"Hardware"},{"id":"frontend","depth":2,"text":"Frontend"},{"id":"machinekit","depth":2,"text":"MachineKit"}]}},"_type":"markdown","_id":"content:6.notes:2.links.md","_source":"content","_file":"6.notes/2.links.md","_extension":"md"}],"navigation":[{"title":"Operating System","_path":"/os","children":[{"title":"DietPi","_path":"/os/dietpi","children":[{"title":"Install","_path":"/os/dietpi"},{"title":"Commands","_path":"/os/dietpi/cmd"},{"title":"Hard Disk Setup","_path":"/os/dietpi/hard-disk"},{"title":"Disk Sleep","_path":"/os/dietpi/drivesleep"},{"title":"Other Tools","_path":"/os/dietpi/tools"},{"title":"Creating a Disk Image","_path":"/os/dietpi/image"}]},{"title":"Armbian","_path":"/os/armbian","children":[{"title":"Title of the page","_path":"/os/armbian/notes"},{"title":"Armbian Notes","_path":"/os/armbian/todo"}]},{"title":"Linux Kernel","_path":"/os/kernel","children":[{"title":"Kernel","_path":"/os/kernel"},{"title":"RPi Kernel","_path":"/os/kernel/rpi-kernel"},{"title":"RPI3 Fixes","_path":"/os/kernel/rpi3-usb"},{"title":"Other Devices","_path":"/os/kernel/other-devs"}]},{"title":"Optimisations","_path":"/os/optimise","children":[{"title":"Kernel Config","_path":"/os/optimise/kernelcfg"},{"title":"Boot Options","_path":"/os/optimise/bootcmd"},{"title":"Userspace Config","_path":"/os/optimise/usercfg"},{"title":"Exclusions","_path":"/os/optimise/exclusions","children":[{"title":"Kernel Config","_path":"/os/optimise/exclusions/kernelcfg"},{"title":"Boot Options","_path":"/os/optimise/exclusions/bootcmd"},{"title":"Startup Script","_path":"/os/optimise/exclusions/startupscript"}]}]},{"title":"Benchmarking","_path":"/os/benchmarking","children":[{"title":"LinuxCNC","_path":"/os/benchmarking/linuxcnc"},{"title":"Other Tools","_path":"/os/benchmarking/other"}]}]},{"title":"Userspace","_path":"/userspace","children":[{"title":"LinuxCNC","_path":"/userspace/linuxcnc","children":[{"title":"Install LinuxCNC","_path":"/userspace/linuxcnc"},{"title":"Build LinuxCNC","_path":"/userspace/linuxcnc/build"},{"title":"Mesaflash","_path":"/userspace/linuxcnc/mesaflash"}]}]},{"title":"Disk Images","_path":"/diskimages","children":[{"title":"Stock Image","_path":"/diskimages/stock"},{"title":"DietPi Image","_path":"/diskimages/dietpi"}]},{"title":"Hardware","_path":"/hardware","children":[{"title":"Mesa","_path":"/hardware/mesa","children":[{"title":"Mesa 7i96s","_path":"/hardware/mesa/test"}]},{"title":"EtherCat","_path":"/hardware/ethercat","children":[{"title":"EtherCat","_path":"/hardware/ethercat"}]}]},{"title":"Notes","_path":"/notes","children":[{"title":"Results","_path":"/notes/results"},{"title":"Links","_path":"/notes/links"}]}]}